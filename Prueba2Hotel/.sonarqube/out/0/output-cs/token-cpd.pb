¹6
`C:\Users\joela\source\repos\PruebaParcial2\Prueba2Hotel\Prueba2Hotel\SerAdicionalesController.cs
	namespace 	
Prueba2Hotel
 
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public		 

class		 $
SerAdicionalesController		 )
:		* +
ControllerBase		, :
{

 
private 
readonly 
AppDBContext %
_appDBContext& 3
;3 4
public $
SerAdicionalesController '
(' (
AppDBContext( 4
appDBContext5 A
)A B
{ 	
_appDBContext 
= 
appDBContext (
;( )
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetServicios) 5
(5 6
)6 7
{ 	
return 
Ok 
( 
await 
_appDBContext )
.) * 
ServiciosAdicionales* >
.> ?
ToListAsync? J
(J K
)K L
)L M
;M N
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
PostServicio) 5
(5 6 
ServiciosAdicionales6 J
servicioK S
)S T
{ 	
if 
( 
! 

ModelState 
. 
IsValid #
)# $
{ 
return 

BadRequest !
(! "

ModelState" ,
), -
;- .
} 
_appDBContext!! 
.!!  
ServiciosAdicionales!! .
.!!. /
Add!!/ 2
(!!2 3
servicio!!3 ;
)!!; <
;!!< =
await"" 
_appDBContext"" 
.""  
SaveChangesAsync""  0
(""0 1
)""1 2
;""2 3
return## 
Ok## 
(## 
servicio## 
)## 
;##  
}$$ 	
[&& 	
HttpPut&&	 
(&& 
$str&& 
)&& 
]&& 
public'' 
async'' 
Task'' 
<'' 
IActionResult'' '
>''' (
PutServicio'') 4
(''4 5
int''5 8
id''9 ;
,''; <
[''= >
FromBody''> F
]''F G 
ServiciosAdicionales''H \
servicio''] e
)''e f
{(( 	
if)) 
()) 
id)) 
!=)) 
servicio)) 
.)) 
Id)) !
)))! "
{** 
return++ 

BadRequest++ !
(++! "
new++" %
{++& '
message++( /
=++0 1
$str++2 S
}++T U
)++U V
;++V W
},, 
if.. 
(.. 
!.. 

ModelState.. 
... 
IsValid.. #
)..# $
{// 
return00 

BadRequest00 !
(00! "

ModelState00" ,
)00, -
;00- .
}11 
try33 
{44 
_appDBContext55 
.55 
Entry55 #
(55# $
servicio55$ ,
)55, -
.55- .
State55. 3
=554 5
EntityState556 A
.55A B
Modified55B J
;55J K
await66 
_appDBContext66 #
.66# $
SaveChangesAsync66$ 4
(664 5
)665 6
;666 7
return77 
	NoContent77  
(77  !
)77! "
;77" #
}88 
catch99 
(99 (
DbUpdateConcurrencyException99 /
)99/ 0
{:: 
if;; 
(;; 
!;; 
await;; 
_appDBContext;; (
.;;( ) 
ServiciosAdicionales;;) =
.;;= >
AnyAsync;;> F
(;;F G
s;;G H
=>;;I K
s;;L M
.;;M N
Id;;N P
==;;Q S
id;;T V
);;V W
);;W X
{<< 
return== 
NotFound== #
(==# $
new==$ '
{==( )
message==* 1
===2 3
$str==4 W
}==X Y
)==Y Z
;==Z [
}>> 
throw?? 
;?? 
}@@ 
catchAA 
(AA 
	ExceptionAA 
exAA 
)AA  
{BB 
returnCC 

StatusCodeCC !
(CC! "
StatusCodesCC" -
.CC- .(
Status500InternalServerErrorCC. J
,CCJ K
newCCL O
{CCP Q
messageCCR Y
=CCZ [
exCC\ ^
.CC^ _
MessageCC_ f
}CCg h
)CCh i
;CCi j
}DD 
}EE 	
[GG 	

HttpDeleteGG	 
(GG 
$strGG 
)GG 
]GG 
publicHH 
asyncHH 
TaskHH 
<HH 
IActionResultHH '
>HH' (
DeleteServicioHH) 7
(HH7 8
intHH8 ;
idHH< >
)HH> ?
{II 	
tryJJ 
{KK 
varLL 
servicioLL 
=LL 
awaitLL $
_appDBContextLL% 2
.LL2 3 
ServiciosAdicionalesLL3 G
.LLG H
	FindAsyncLLH Q
(LLQ R
idLLR T
)LLT U
;LLU V
ifMM 
(MM 
servicioMM 
==MM 
nullMM  $
)MM$ %
{NN 
returnOO 
NotFoundOO #
(OO# $
newOO$ '
{OO( )
messageOO* 1
=OO2 3
$strOO4 W
}OOX Y
)OOY Z
;OOZ [
}PP 
_appDBContextRR 
.RR  
ServiciosAdicionalesRR 2
.RR2 3
RemoveRR3 9
(RR9 :
servicioRR: B
)RRB C
;RRC D
awaitSS 
_appDBContextSS #
.SS# $
SaveChangesAsyncSS$ 4
(SS4 5
)SS5 6
;SS6 7
returnTT 
OkTT 
(TT 
newTT 
{TT 
messageTT  '
=TT( )
$strTT* L
,TTL M
servicioTTN V
}TTW X
)TTX Y
;TTY Z
}UU 
catchVV 
(VV 
	ExceptionVV 
exVV 
)VV  
{WW 
returnXX 

StatusCodeXX !
(XX! "
StatusCodesXX" -
.XX- .(
Status500InternalServerErrorXX. J
,XXJ K
newXXL O
{XXP Q
messageXXR Y
=XXZ [
exXX\ ^
.XX^ _
MessageXX_ f
}XXg h
)XXh i
;XXi j
}YY 
}ZZ 	
}[[ 
}\\ ¹
OC:\Users\joela\source\repos\PruebaParcial2\Prueba2Hotel\Prueba2Hotel\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder		 
.		 
Services		 
.		 
AddControllers		 
(		  
)		  !
;		! "
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
DotEnv 
. 
Load 
( 
) 
; 
var 
defaultConnection 
= 
Environment #
.# $"
GetEnvironmentVariable$ :
(: ;
$str; O
)O P
;P Q
builder 
. 
Services 
. 
AddDbContext 
< 
AppDBContext *
>* +
(+ ,
options, 3
=>4 6
options 
. 
UseSqlServer 
( 
defaultConnection *
)* +
)+ ,
;, -
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
app 
. 
Environment 
. 
IsDevelopment !
(! "
)" #
)# $
{ 
app 
. 

UseSwagger 
( 
) 
; 
app 
. 
UseSwaggerUI 
( 
) 
; 
} 
app 
. 
UseAuthorization 
( 
) 
; 
app 
. 
MapControllers 
( 
) 
; 
await   
app   	
.  	 

RunAsync  
 
(   
)   
;   ¸h
rC:\Users\joela\source\repos\PruebaParcial2\Prueba2Hotel\Prueba2Hotel\Migrations\20250116215109_CreationDatabase.cs
	namespace 	
Prueba2Hotel
 
. 

Migrations !
{ 
public		 

partial		 
class		 
CreationDatabase		 )
:		* +
	Migration		, 5
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
,  
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 6
,6 7
nullable8 @
:@ A
falseB G
)G H
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
Nombre 
= 
table "
." #
Column# )
<) *
string* 0
>0 1
(1 2
type2 6
:6 7
$str8 G
,G H
nullableI Q
:Q R
falseS X
)X Y
,Y Z
Apellido 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
type4 8
:8 9
$str: I
,I J
nullableK S
:S T
falseU Z
)Z [
,[ \
Correo 
= 
table "
." #
Column# )
<) *
string* 0
>0 1
(1 2
type2 6
:6 7
$str8 G
,G H
nullableI Q
:Q R
falseS X
)X Y
,Y Z
Telefono 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
type4 8
:8 9
$str: I
,I J
nullableK S
:S T
falseU Z
)Z [
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 1
,1 2
x3 4
=>5 7
x8 9
.9 :
Id: <
)< =
;= >
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str "
," #
columns   
:   
table   
=>   !
new  " %
{!! 
Id"" 
="" 
table"" 
."" 
Column"" %
<""% &
int""& )
>"") *
(""* +
type""+ /
:""/ 0
$str""1 6
,""6 7
nullable""8 @
:""@ A
false""B G
)""G H
.## 

Annotation## #
(### $
$str##$ 8
,##8 9
$str##: @
)##@ A
,##A B
Tipo$$ 
=$$ 
table$$  
.$$  !
Column$$! '
<$$' (
string$$( .
>$$. /
($$/ 0
type$$0 4
:$$4 5
$str$$6 E
,$$E F
nullable$$G O
:$$O P
false$$Q V
)$$V W
,$$W X
NumMaximoPersonas%% %
=%%& '
table%%( -
.%%- .
Column%%. 4
<%%4 5
double%%5 ;
>%%; <
(%%< =
type%%= A
:%%A B
$str%%C J
,%%J K
nullable%%L T
:%%T U
false%%V [
)%%[ \
,%%\ ]
Banio&& 
=&& 
table&& !
.&&! "
Column&&" (
<&&( )
bool&&) -
>&&- .
(&&. /
type&&/ 3
:&&3 4
$str&&5 :
,&&: ;
nullable&&< D
:&&D E
false&&F K
)&&K L
,&&L M
Precio'' 
='' 
table'' "
.''" #
Column''# )
<'') *
double''* 0
>''0 1
(''1 2
type''2 6
:''6 7
$str''8 C
,''C D
	precision''E N
:''N O
$num''P R
,''R S
scale''T Y
:''Y Z
$num''[ \
,''\ ]
nullable''^ f
:''f g
false''h m
)''m n
}(( 
,(( 
constraints)) 
:)) 
table)) "
=>))# %
{** 
table++ 
.++ 

PrimaryKey++ $
(++$ %
$str++% 4
,++4 5
x++6 7
=>++8 :
x++; <
.++< =
Id++= ?
)++? @
;++@ A
},, 
),, 
;,, 
migrationBuilder.. 
... 
CreateTable.. (
(..( )
name// 
:// 
$str// 
,//  
columns00 
:00 
table00 
=>00 !
new00" %
{11 
Id22 
=22 
table22 
.22 
Column22 %
<22% &
int22& )
>22) *
(22* +
type22+ /
:22/ 0
$str221 6
,226 7
nullable228 @
:22@ A
false22B G
)22G H
.33 

Annotation33 #
(33# $
$str33$ 8
,338 9
$str33: @
)33@ A
,33A B
	ClienteId44 
=44 
table44  %
.44% &
Column44& ,
<44, -
int44- 0
>440 1
(441 2
type442 6
:446 7
$str448 =
,44= >
nullable44? G
:44G H
false44I N
)44N O
,44O P
HabitacionId55  
=55! "
table55# (
.55( )
Column55) /
<55/ 0
int550 3
>553 4
(554 5
type555 9
:559 :
$str55; @
,55@ A
nullable55B J
:55J K
false55L Q
)55Q R
,55R S
Fecha66 
=66 
table66 !
.66! "
Column66" (
<66( )
string66) /
>66/ 0
(660 1
type661 5
:665 6
$str667 F
,66F G
nullable66H P
:66P Q
false66R W
)66W X
,66X Y
Entrada77 
=77 
table77 #
.77# $
Column77$ *
<77* +
DateTime77+ 3
>773 4
(774 5
type775 9
:779 :
$str77; F
,77F G
nullable77H P
:77P Q
false77R W
)77W X
,77X Y
Salida88 
=88 
table88 "
.88" #
Column88# )
<88) *
DateTime88* 2
>882 3
(883 4
type884 8
:888 9
$str88: E
,88E F
nullable88G O
:88O P
false88Q V
)88V W
}99 
,99 
constraints:: 
::: 
table:: "
=>::# %
{;; 
table<< 
.<< 

PrimaryKey<< $
(<<$ %
$str<<% 1
,<<1 2
x<<3 4
=><<5 7
x<<8 9
.<<9 :
Id<<: <
)<<< =
;<<= >
table== 
.== 

ForeignKey== $
(==$ %
name>> 
:>> 
$str>> <
,>>< =
column?? 
:?? 
x??  !
=>??" $
x??% &
.??& '
	ClienteId??' 0
,??0 1
principalTable@@ &
:@@& '
$str@@( 1
,@@1 2
principalColumnAA '
:AA' (
$strAA) -
,AA- .
onDeleteBB  
:BB  !
ReferentialActionBB" 3
.BB3 4
CascadeBB4 ;
)BB; <
;BB< =
tableCC 
.CC 

ForeignKeyCC $
(CC$ %
nameDD 
:DD 
$strDD B
,DDB C
columnEE 
:EE 
xEE  !
=>EE" $
xEE% &
.EE& '
HabitacionIdEE' 3
,EE3 4
principalTableFF &
:FF& '
$strFF( 4
,FF4 5
principalColumnGG '
:GG' (
$strGG) -
,GG- .
onDeleteHH  
:HH  !
ReferentialActionHH" 3
.HH3 4
CascadeHH4 ;
)HH; <
;HH< =
}II 
)II 
;II 
migrationBuilderKK 
.KK 
CreateTableKK (
(KK( )
nameLL 
:LL 
$strLL ,
,LL, -
columnsMM 
:MM 
tableMM 
=>MM !
newMM" %
{NN 
IdOO 
=OO 
tableOO 
.OO 
ColumnOO %
<OO% &
intOO& )
>OO) *
(OO* +
typeOO+ /
:OO/ 0
$strOO1 6
,OO6 7
nullableOO8 @
:OO@ A
falseOOB G
)OOG H
.PP 

AnnotationPP #
(PP# $
$strPP$ 8
,PP8 9
$strPP: @
)PP@ A
,PPA B
	ReservaIdQQ 
=QQ 
tableQQ  %
.QQ% &
ColumnQQ& ,
<QQ, -
intQQ- 0
>QQ0 1
(QQ1 2
typeQQ2 6
:QQ6 7
$strQQ8 =
,QQ= >
nullableQQ? G
:QQG H
falseQQI N
)QQN O
,QQO P
DescripcionRR 
=RR  !
tableRR" '
.RR' (
ColumnRR( .
<RR. /
stringRR/ 5
>RR5 6
(RR6 7
typeRR7 ;
:RR; <
$strRR= L
,RRL M
nullableRRN V
:RRV W
falseRRX ]
)RR] ^
,RR^ _
CostoSS 
=SS 
tableSS !
.SS! "
ColumnSS" (
<SS( )
decimalSS) 0
>SS0 1
(SS1 2
typeSS2 6
:SS6 7
$strSS8 G
,SSG H
	precisionSSI R
:SSR S
$numSST V
,SSV W
scaleSSX ]
:SS] ^
$numSS_ `
,SS` a
nullableSSb j
:SSj k
falseSSl q
)SSq r
}TT 
,TT 
constraintsUU 
:UU 
tableUU "
=>UU# %
{VV 
tableWW 
.WW 

PrimaryKeyWW $
(WW$ %
$strWW% >
,WW> ?
xWW@ A
=>WWB D
xWWE F
.WWF G
IdWWG I
)WWI J
;WWJ K
tableXX 
.XX 

ForeignKeyXX $
(XX$ %
nameYY 
:YY 
$strYY I
,YYI J
columnZZ 
:ZZ 
xZZ  !
=>ZZ" $
xZZ% &
.ZZ& '
	ReservaIdZZ' 0
,ZZ0 1
principalTable[[ &
:[[& '
$str[[( 1
,[[1 2
principalColumn\\ '
:\\' (
$str\\) -
,\\- .
onDelete]]  
:]]  !
ReferentialAction]]" 3
.]]3 4
Cascade]]4 ;
)]]; <
;]]< =
}^^ 
)^^ 
;^^ 
migrationBuilder`` 
.`` 
CreateIndex`` (
(``( )
nameaa 
:aa 
$straa ,
,aa, -
tablebb 
:bb 
$strbb  
,bb  !
columncc 
:cc 
$strcc #
)cc# $
;cc$ %
migrationBuilderee 
.ee 
CreateIndexee (
(ee( )
nameff 
:ff 
$strff /
,ff/ 0
tablegg 
:gg 
$strgg  
,gg  !
columnhh 
:hh 
$strhh &
)hh& '
;hh' (
migrationBuilderjj 
.jj 
CreateIndexjj (
(jj( )
namekk 
:kk 
$strkk 9
,kk9 :
tablell 
:ll 
$strll -
,ll- .
columnmm 
:mm 
$strmm #
)mm# $
;mm$ %
}nn 	
	protectedqq 
overrideqq 
voidqq 
Downqq  $
(qq$ %
MigrationBuilderqq% 5
migrationBuilderqq6 F
)qqF G
{rr 	
migrationBuilderss 
.ss 
	DropTabless &
(ss& '
namett 
:tt 
$strtt ,
)tt, -
;tt- .
migrationBuildervv 
.vv 
	DropTablevv &
(vv& '
nameww 
:ww 
$strww 
)ww  
;ww  !
migrationBuilderyy 
.yy 
	DropTableyy &
(yy& '
namezz 
:zz 
$strzz 
)zz  
;zz  !
migrationBuilder|| 
.|| 
	DropTable|| &
(||& '
name}} 
:}} 
$str}} "
)}}" #
;}}# $
}~~ 	
} 
} ò5
fC:\Users\joela\source\repos\PruebaParcial2\Prueba2Hotel\Prueba2Hotel\Controllers\ReservasController.cs
	namespace 	
Prueba2Hotel
 
. 
Controllers "
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public		 

class		 
ReservasController		 #
:		$ %
ControllerBase		& 4
{

 
private 
readonly 
AppDBContext %
_appDBContext& 3
;3 4
public 
ReservasController !
(! "
AppDBContext" .
appDBContext/ ;
); <
{ 	
_appDBContext 
= 
appDBContext (
;( )
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetReservas) 4
(4 5
)5 6
{ 	
return 
Ok 
( 
await 
_appDBContext )
.) *
Reserva* 1
.1 2
ToListAsync2 =
(= >
)> ?
)? @
;@ A
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
PostReserva) 4
(4 5
Reserva5 <
reserva= D
)D E
{ 	
if 
( 
! 

ModelState 
. 
IsValid #
)# $
{ 
return 

BadRequest !
(! "

ModelState" ,
), -
;- .
} 
_appDBContext   
.   
Reserva   !
.  ! "
Add  " %
(  % &
reserva  & -
)  - .
;  . /
await!! 
_appDBContext!! 
.!!  
SaveChangesAsync!!  0
(!!0 1
)!!1 2
;!!2 3
return"" 
Ok"" 
("" 
reserva"" 
)"" 
;"" 
}## 	
[%% 	
HttpPut%%	 
(%% 
$str%% 
)%% 
]%% 
public&& 
async&& 
Task&& 
<&& 
IActionResult&& '
>&&' (

PutReserva&&) 3
(&&3 4
int&&4 7
id&&8 :
,&&: ;
[&&< =
FromBody&&= E
]&&E F
Reserva&&G N
reserva&&O V
)&&V W
{'' 	
if(( 
((( 
id(( 
!=(( 
reserva(( 
.(( 
Id((  
)((  !
{)) 
return** 

BadRequest** !
(**! "
new**" %
{**& '
message**( /
=**0 1
$str**2 T
}**U V
)**V W
;**W X
}++ 
if-- 
(-- 
!-- 

ModelState-- 
.-- 
IsValid-- #
)--# $
{.. 
return// 

BadRequest// !
(//! "

ModelState//" ,
)//, -
;//- .
}00 
try22 
{33 
_appDBContext44 
.44 
Entry44 #
(44# $
reserva44$ +
)44+ ,
.44, -
State44- 2
=443 4
EntityState445 @
.44@ A
Modified44A I
;44I J
await55 
_appDBContext55 #
.55# $
SaveChangesAsync55$ 4
(554 5
)555 6
;556 7
return66 
	NoContent66  
(66  !
)66! "
;66" #
}77 
catch88 
(88 (
DbUpdateConcurrencyException88 /
)88/ 0
{99 
if:: 
(:: 
!:: 
await:: 
_appDBContext:: (
.::( )
Reserva::) 0
.::0 1
AnyAsync::1 9
(::9 :
r::: ;
=>::< >
r::? @
.::@ A
Id::A C
==::D F
id::G I
)::I J
)::J K
{;; 
return<< 
NotFound<< #
(<<# $
new<<$ '
{<<( )
message<<* 1
=<<2 3
$str<<4 L
}<<M N
)<<N O
;<<O P
}== 
throw>> 
;>> 
}?? 
catch@@ 
(@@ 
	Exception@@ 
ex@@ 
)@@  
{AA 
returnBB 

StatusCodeBB !
(BB! "
StatusCodesBB" -
.BB- .(
Status500InternalServerErrorBB. J
,BBJ K
newBBL O
{BBP Q
messageBBR Y
=BBZ [
exBB\ ^
.BB^ _
MessageBB_ f
}BBg h
)BBh i
;BBi j
}CC 
}DD 	
[FF 	

HttpDeleteFF	 
(FF 
$strFF 
)FF 
]FF 
publicGG 
asyncGG 
TaskGG 
<GG 
IActionResultGG '
>GG' (
DeleteReservaGG) 6
(GG6 7
intGG7 :
idGG; =
)GG= >
{HH 	
tryII 
{JJ 
varKK 
reservaKK 
=KK 
awaitKK #
_appDBContextKK$ 1
.KK1 2
ReservaKK2 9
.KK9 :
	FindAsyncKK: C
(KKC D
idKKD F
)KKF G
;KKG H
ifLL 
(LL 
reservaLL 
==LL 
nullLL #
)LL# $
{MM 
returnNN 
NotFoundNN #
(NN# $
newNN$ '
{NN( )
messageNN* 1
=NN2 3
$strNN4 L
}NNM N
)NNN O
;NNO P
}OO 
_appDBContextQQ 
.QQ 
ReservaQQ %
.QQ% &
RemoveQQ& ,
(QQ, -
reservaQQ- 4
)QQ4 5
;QQ5 6
awaitRR 
_appDBContextRR #
.RR# $
SaveChangesAsyncRR$ 4
(RR4 5
)RR5 6
;RR6 7
returnSS 
OkSS 
(SS 
newSS 
{SS 
messageSS  '
=SS( )
$strSS* K
,SSK L
reservaSSM T
}SSU V
)SSV W
;SSW X
}TT 
catchUU 
(UU 
	ExceptionUU 
exUU 
)UU  
{VV 
returnWW 

StatusCodeWW !
(WW! "
StatusCodesWW" -
.WW- .(
Status500InternalServerErrorWW. J
,WWJ K
newWWL O
{WWP Q
messageWWR Y
=WWZ [
exWW\ ^
.WW^ _
MessageWW_ f
}WWg h
)WWh i
;WWi j
}XX 
}YY 	
}ZZ 
}[[ 6
hC:\Users\joela\source\repos\PruebaParcial2\Prueba2Hotel\Prueba2Hotel\Controllers\HabitacionController.cs
	namespace 	
Prueba2Hotel
 
. 
Controllers "
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public		 

class		  
HabitacionController		 %
:		& '
ControllerBase		( 6
{

 
private 
readonly 
AppDBContext %
_appDBContext& 3
;3 4
public  
HabitacionController #
(# $
AppDBContext$ 0
appDBContext1 =
)= >
{ 	
_appDBContext 
= 
appDBContext (
;( )
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetHabitaciones) 8
(8 9
)9 :
{ 	
return 
Ok 
( 
await 
_appDBContext )
.) *

Habitacion* 4
.4 5
ToListAsync5 @
(@ A
)A B
)B C
;C D
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
PostHabitacion) 7
(7 8

Habitacion8 B

habitacionC M
)M N
{ 	
if 
( 
! 

ModelState 
. 
IsValid #
)# $
{ 
return 

BadRequest !
(! "

ModelState" ,
), -
;- .
}   
_appDBContext!! 
.!! 

Habitacion!! $
.!!$ %
Add!!% (
(!!( )

habitacion!!) 3
)!!3 4
;!!4 5
await"" 
_appDBContext"" 
.""  
SaveChangesAsync""  0
(""0 1
)""1 2
;""2 3
return## 
Ok## 
(## 

habitacion##  
)##  !
;##! "
}$$ 	
[&& 	
HttpPut&&	 
(&& 
$str&& 
)&& 
]&& 
public'' 
async'' 
Task'' 
<'' 
IActionResult'' '
>''' (
PutHabitacion'') 6
(''6 7
int''7 :
id''; =
,''= >

Habitacion''? I

habitacion''J T
)''T U
{(( 	
if)) 
()) 
id)) 
!=)) 

habitacion))  
.))  !
Id))! #
)))# $
{** 
return++ 

BadRequest++ !
(++! "
new++" %
{++& '
message++( /
=++0 1
$str++2 W
}++X Y
)++Y Z
;++Z [
},, 
if.. 
(.. 
!.. 

ModelState.. 
... 
IsValid.. #
)..# $
{// 
return00 

BadRequest00 !
(00! "

ModelState00" ,
)00, -
;00- .
}11 
try33 
{44 
_appDBContext55 
.55 
Entry55 #
(55# $

habitacion55$ .
)55. /
.55/ 0
State550 5
=556 7
EntityState558 C
.55C D
Modified55D L
;55L M
await66 
_appDBContext66 #
.66# $
SaveChangesAsync66$ 4
(664 5
)665 6
;666 7
return77 
	NoContent77  
(77  !
)77! "
;77" #
}88 
catch99 
(99 (
DbUpdateConcurrencyException99 /
)99/ 0
{:: 
if;; 
(;; 
!;; 
await;; 
_appDBContext;; (
.;;( )

Habitacion;;) 3
.;;3 4
AnyAsync;;4 <
(;;< =
h;;= >
=>;;? A
h;;B C
.;;C D
Id;;D F
==;;G I
id;;J L
);;L M
);;M N
{<< 
return== 
NotFound== #
(==# $
new==$ '
{==( )
message==* 1
===2 3
$str==4 O
}==P Q
)==Q R
;==R S
}>> 
throw?? 
;?? 
}@@ 
catchAA 
(AA 
	ExceptionAA 
exAA 
)AA  
{BB 
returnCC 

StatusCodeCC !
(CC! "
StatusCodesCC" -
.CC- .(
Status500InternalServerErrorCC. J
,CCJ K
newCCL O
{CCP Q
messageCCR Y
=CCZ [
exCC\ ^
.CC^ _
MessageCC_ f
}CCg h
)CCh i
;CCi j
}DD 
}EE 	
[GG 	

HttpDeleteGG	 
(GG 
$strGG 
)GG 
]GG 
publicHH 
asyncHH 
TaskHH 
<HH 
IActionResultHH '
>HH' (
DeleteHabitacionHH) 9
(HH9 :
intHH: =
idHH> @
)HH@ A
{II 	
tryJJ 
{KK 
varLL 

habitacionLL 
=LL  
awaitLL! &
_appDBContextLL' 4
.LL4 5

HabitacionLL5 ?
.LL? @
	FindAsyncLL@ I
(LLI J
idLLJ L
)LLL M
;LLM N
ifMM 
(MM 

habitacionMM 
==MM !
nullMM" &
)MM& '
{NN 
returnOO 
NotFoundOO #
(OO# $
newOO$ '
{OO( )
messageOO* 1
=OO2 3
$strOO4 O
}OOP Q
)OOQ R
;OOR S
}PP 
_appDBContextRR 
.RR 

HabitacionRR (
.RR( )
RemoveRR) /
(RR/ 0

habitacionRR0 :
)RR: ;
;RR; <
awaitSS 
_appDBContextSS #
.SS# $
SaveChangesAsyncSS$ 4
(SS4 5
)SS5 6
;SS6 7
returnTT 
OkTT 
(TT 
newTT 
{TT 
messageTT  '
=TT( )
$strTT* N
,TTN O

habitacionTTP Z
}TT[ \
)TT\ ]
;TT] ^
}UU 
catchVV 
(VV 
	ExceptionVV 
exVV 
)VV  
{WW 
returnXX 

StatusCodeXX !
(XX! "
StatusCodesXX" -
.XX- .(
Status500InternalServerErrorXX. J
,XXJ K
newXXL O
{XXP Q
messageXXR Y
=XXZ [
exXX\ ^
.XX^ _
MessageXX_ f
}XXg h
)XXh i
;XXi j
}YY 
}ZZ 	
}[[ 
}\\ Ñ/
eC:\Users\joela\source\repos\PruebaParcial2\Prueba2Hotel\Prueba2Hotel\Controllers\ClienteController.cs
	namespace 	
Prueba2Hotel
 
. 
Controllers "
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public		 

class		 
ClienteController		 "
:		# $
ControllerBase		% 3
{

 
private 
readonly 
AppDBContext %
_appDBContext& 3
;3 4
public 
ClienteController  
(  !
AppDBContext! -
appDBContext. :
): ;
{ 	
_appDBContext 
= 
appDBContext (
;( )
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetClientes) 4
(4 5
)5 6
{ 	
return 
Ok 
( 
await 
_appDBContext )
.) *
Cliente* 1
.1 2
ToListAsync2 =
(= >
)> ?
)? @
;@ A
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
PostCliente) 4
(4 5
Cliente5 <
cliente= D
)D E
{ 	
if 
( 
! 

ModelState 
. 
IsValid #
)# $
{ 
return 

BadRequest !
(! "

ModelState" ,
), -
;- .
} 
_appDBContext!! 
.!! 
Cliente!! !
.!!! "
Add!!" %
(!!% &
cliente!!& -
)!!- .
;!!. /
await"" 
_appDBContext"" 
.""  
SaveChangesAsync""  0
(""0 1
)""1 2
;""2 3
return## 
Ok## 
(## 
cliente## 
)## 
;## 
}$$ 	
[&& 	
HttpPut&&	 
(&& 
$str&& 
)&& 
]&& 
public'' 
async'' 
Task'' 
<'' 
IActionResult'' '
>''' (

PutCliente'') 3
(''3 4
int''4 7
id''8 :
,'': ;
[''< =
FromBody''= E
]''E F
Cliente''G N
cliente''O V
)''V W
{(( 	
if)) 
()) 
id)) 
!=)) 
cliente)) 
.)) 
Id))  
)))  !
{** 
return++ 

BadRequest++ !
(++! "
new++" %
{++& '
message++( /
=++0 1
$str++2 R
}++S T
)++T U
;++U V
},, 
if.. 
(.. 
!.. 

ModelState.. 
... 
IsValid.. #
)..# $
{// 
return00 

BadRequest00 !
(00! "

ModelState00" ,
)00, -
;00- .
}11 
_appDBContext33 
.33 
Entry33 
(33  
cliente33  '
)33' (
.33( )
State33) .
=33/ 0
EntityState331 <
.33< =
Modified33= E
;33E F
try55 
{66 
await77 
_appDBContext77 #
.77# $
SaveChangesAsync77$ 4
(774 5
)775 6
;776 7
}88 
catch99 
(99 (
DbUpdateConcurrencyException99 /
)99/ 0
{:: 
if;; 
(;; 
!;; 
ClienteExists;; "
(;;" #
id;;# %
);;% &
);;& '
{<< 
return== 
NotFound== #
(==# $
new==$ '
{==( )
message==* 1
===2 3
$str==4 L
}==M N
)==N O
;==O P
}>> 
throw?? 
;?? 
}@@ 
returnBB 
	NoContentBB 
(BB 
)BB 
;BB 
}CC 	
privateEE 
boolEE 
ClienteExistsEE "
(EE" #
intEE# &
idEE' )
)EE) *
{FF 	
returnGG 
_appDBContextGG  
.GG  !
ClienteGG! (
.GG( )
AnyGG) ,
(GG, -
eGG- .
=>GG/ 1
eGG2 3
.GG3 4
IdGG4 6
==GG7 9
idGG: <
)GG< =
;GG= >
}HH 	
[JJ 	

HttpDeleteJJ	 
(JJ 
$strJJ 
)JJ 
]JJ 
publicKK 
asyncKK 
TaskKK 
<KK 
IActionResultKK '
>KK' (
DeleteClienteKK) 6
(KK6 7
intKK7 :
idKK; =
)KK= >
{LL 	
varMM 
clienteMM 
=MM 
awaitMM 
_appDBContextMM  -
.MM- .
ClienteMM. 5
.MM5 6
	FindAsyncMM6 ?
(MM? @
idMM@ B
)MMB C
;MMC D
ifNN 
(NN 
clienteNN 
==NN 
nullNN 
)NN  
{OO 
returnPP 
NotFoundPP 
(PP  
newPP  #
{PP$ %
messagePP& -
=PP. /
$strPP0 H
}PPI J
)PPJ K
;PPK L
}QQ 
_appDBContextSS 
.SS 
ClienteSS !
.SS! "
RemoveSS" (
(SS( )
clienteSS) 0
)SS0 1
;SS1 2
awaitTT 
_appDBContextTT 
.TT  
SaveChangesAsyncTT  0
(TT0 1
)TT1 2
;TT2 3
returnUU 
OkUU 
(UU 
clienteUU 
)UU 
;UU 
}VV 	
}YY 
}ZZ Q
TC:\Users\joela\source\repos\PruebaParcial2\Prueba2Hotel\Prueba2Hotel\AppDBContext.cs
	namespace 	
Prueba2Hotel
 
{		 
public

 

class

 
AppDBContext

 
:

 
	DbContext

  )
{ 
public 
AppDBContext 
( 
DbContextOptions ,
<, -
AppDBContext- 9
>9 :
options; B
)B C
:D E
baseF J
(J K
optionsK R
)R S
{T U
}V W
public 
DbSet 
< 
Cliente 
> 
Cliente %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
DbSet 
< 

Habitacion 
>  

Habitacion! +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
DbSet 
< 
Reserva 
> 
Reserva %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
DbSet 
<  
ServiciosAdicionales )
>) * 
ServiciosAdicionales+ ?
{@ A
getB E
;E F
setG J
;J K
}L M
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
modelBuilder 
. 
Entity 
<  
Reserva  '
>' (
(( )
)) *
. 
HasOne 
( 
c 
=> 
c 
. 
Cliente &
)& '
. 
WithMany 
( 
r 
=> 
r  
.  !
Reserva! (
)( )
. 
HasForeignKey 
( 
c  
=>! #
c$ %
.% &
	ClienteId& /
)/ 0
;0 1
modelBuilder 
. 
Entity 
<  
Reserva  '
>' (
(( )
)) *
. 
HasOne 
( 
h 
=> 
h 
. 

Habitacion )
)) *
. 
WithMany 
( 
r 
=> 
r  
.  !
Reserva! (
)( )
. 
HasForeignKey 
( 
h  
=>! #
h$ %
.% &
HabitacionId& 2
)2 3
;3 4
modelBuilder   
.   
Entity   
<     
ServiciosAdicionales    4
>  4 5
(  5 6
)  6 7
.!! 
HasOne!! 
(!! 
r!! 
=>!! 
r!! 
.!! 
Reserva!! &
)!!& '
."" 
WithMany"" 
("" 
s"" 
=>"" 
s""  
.""  ! 
ServiciosAdicionales""! 5
)""5 6
.## 
HasForeignKey## 
(## 
r##  
=>##! #
r##$ %
.##% &
	ReservaId##& /
)##/ 0
;##0 1
modelBuilder%% 
.%% 
Entity%% 
<%%   
ServiciosAdicionales%%  4
>%%4 5
(%%5 6
)%%6 7
.&& 
Property&& 
(&& 
s&& 
=>&& 
s&&  
.&&  !
Costo&&! &
)&&& '
.'' 
HasPrecision'' 
('' 
$num''  
,''  !
$num''" #
)''# $
;''$ %
modelBuilder)) 
.)) 
Entity)) 
<))  

Habitacion))  *
>))* +
())+ ,
))), -
.** 
Property** 
(** 
s** 
=>** 
s**  
.**  !
Precio**! '
)**' (
.++ 
HasPrecision++ 
(++ 
$num++  
,++  !
$num++" #
)++# $
;++$ %
base-- 
.-- 
OnModelCreating--  
(--  !
modelBuilder--! -
)--- .
;--. /
}.. 	
}00 
public22 

class22 
Cliente22 
{33 
public44 
required44 
int44 
Id44 
{44  
get44! $
;44$ %
set44& )
;44) *
}44+ ,
public55 
required55 
string55 
Nombre55 %
{55& '
get55( +
;55+ ,
set55- 0
;550 1
}552 3
public66 
required66 
string66 
Apellido66 '
{66( )
get66* -
;66- .
set66/ 2
;662 3
}664 5
public77 
required77 
string77 
Correo77 %
{77& '
get77( +
;77+ ,
set77- 0
;770 1
}772 3
public88 
required88 
string88 
Telefono88 '
{88( )
get88* -
;88- .
set88/ 2
;882 3
}884 5
[;; 	

JsonIgnore;;	 
];; 
public<< 
ICollection<< 
<<< 
Reserva<< "
><<" #
?<<# $
Reserva<<% ,
{<<- .
get<</ 2
;<<2 3
set<<4 7
;<<7 8
}<<9 :
=<<; <
new<<= @
List<<A E
<<<E F
Reserva<<F M
><<M N
(<<N O
)<<O P
;<<P Q
}== 
public?? 

class?? 

Habitacion?? 
{@@ 
publicAA 
requiredAA 
intAA 
IdAA 
{AA  
getAA! $
;AA$ %
setAA& )
;AA) *
}AA+ ,
publicBB 
requiredBB 
stringBB 
TipoBB #
{BB$ %
getBB& )
;BB) *
setBB+ .
;BB. /
}BB0 1
publicCC 
requiredCC 
doubleCC 
NumMaximoPersonasCC 0
{CC1 2
getCC3 6
;CC6 7
setCC8 ;
;CC; <
}CC= >
publicDD 
requiredDD 
boolDD 
BanioDD "
{DD# $
getDD% (
;DD( )
setDD* -
;DD- .
}DD/ 0
publicEE 
requiredEE 
doubleEE 
PrecioEE %
{EE& '
getEE( +
;EE+ ,
setEE- 0
;EE0 1
}EE2 3
[HH 	

JsonIgnoreHH	 
]HH 
publicII 
ICollectionII 
<II 
ReservaII "
>II" #
?II# $
ReservaII% ,
{II- .
getII/ 2
;II2 3
setII4 7
;II7 8
}II9 :
=II; <
newII= @
ListIIA E
<IIE F
ReservaIIF M
>IIM N
(IIN O
)IIO P
;IIP Q
}JJ 
publicLL 

classLL 
ReservaLL 
{MM 
publicNN 
requiredNN 
intNN 
IdNN 
{NN  
getNN! $
;NN$ %
setNN& )
;NN) *
}NN+ ,
publicOO 
requiredOO 
intOO 
	ClienteIdOO %
{OO& '
getOO( +
;OO+ ,
setOO- 0
;OO0 1
}OO2 3
publicPP 
requiredPP 
intPP 
HabitacionIdPP (
{PP) *
getPP+ .
;PP. /
setPP0 3
;PP3 4
}PP5 6
publicQQ 
requiredQQ 
stringQQ 
FechaQQ $
{QQ% &
getQQ' *
;QQ* +
setQQ, /
;QQ/ 0
}QQ1 2
publicRR 
requiredRR 
DateTimeRR  
EntradaRR! (
{RR) *
getRR+ .
;RR. /
setRR0 3
;RR3 4
}RR5 6
publicSS 
requiredSS 
DateTimeSS  
SalidaSS! '
{SS( )
getSS* -
;SS- .
setSS/ 2
;SS2 3
}SS4 5
[UU 	

JsonIgnoreUU	 
]UU 
publicVV 
ClienteVV 
?VV 
ClienteVV 
{VV  !
getVV" %
;VV% &
setVV' *
;VV* +
}VV, -
[XX 	

JsonIgnoreXX	 
]XX 
publicYY 

HabitacionYY 
?YY 

HabitacionYY %
{YY& '
getYY( +
;YY+ ,
setYY- 0
;YY0 1
}YY2 3
[[[ 	

JsonIgnore[[	 
][[ 
public\\ 
ICollection\\ 
<\\  
ServiciosAdicionales\\ /
>\\/ 0
?\\0 1 
ServiciosAdicionales\\2 F
{\\G H
get\\I L
;\\L M
set\\N Q
;\\Q R
}\\S T
=\\U V
new\\W Z
List\\[ _
<\\_ ` 
ServiciosAdicionales\\` t
>\\t u
(\\u v
)\\v w
;\\w x
}]] 
public__ 

class__  
ServiciosAdicionales__ %
{`` 
publicbb 
requiredbb 
intbb 
Idbb 
{bb  
getbb! $
;bb$ %
setbb& )
;bb) *
}bb+ ,
publiccc 
requiredcc 
intcc 
	ReservaIdcc %
{cc& '
getcc( +
;cc+ ,
setcc- 0
;cc0 1
}cc2 3
publicdd 
requireddd 
stringdd 
Descripciondd *
{dd+ ,
getdd- 0
;dd0 1
setdd2 5
;dd5 6
}dd7 8
publicee 
requiredee 
decimalee 
Costoee  %
{ee& '
getee( +
;ee+ ,
setee- 0
;ee0 1
}ee2 3
[gg 	

JsonIgnoregg	 
]gg 
publichh 
Reservahh 
?hh 
Reservahh 
{hh  !
gethh" %
;hh% &
sethh' *
;hh* +
}hh, -
}ii 
}kk 
π
OC:\Users\joela\source\repos\PruebaParcial2\Prueba2Hotel\Prueba2Hotel\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder		 
.		 
Services		 
.		 
AddControllers		 
(		  
)		  !
;		! "
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
DotEnv 
. 
Load 
( 
) 
; 
var 
defaultConnection 
= 
Environment #
.# $"
GetEnvironmentVariable$ :
(: ;
$str; O
)O P
;P Q
builder 
. 
Services 
. 
AddDbContext 
< 
AppDBContext *
>* +
(+ ,
options, 3
=>4 6
options 
. 
UseSqlServer 
( 
defaultConnection *
)* +
)+ ,
;, -
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
app 
. 
Environment 
. 
IsDevelopment !
(! "
)" #
)# $
{ 
app 
. 

UseSwagger 
( 
) 
; 
app 
. 
UseSwaggerUI 
( 
) 
; 
} 
app 
. 
UseAuthorization 
( 
) 
; 
app 
. 
MapControllers 
( 
) 
; 
await   
app   	
.  	 

RunAsync  
 
(   
)   
;   “
wC:\Users\joela\source\repos\PruebaParcial2\Prueba2Hotel\Prueba2Hotel\Migrations\20250118135810_ActualizacionReservas.cs
	namespace 	
Prueba2Hotel
 
. 

Migrations !
{ 
public 

partial 
class !
ActualizacionReservas .
:/ 0
	Migration1 :
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name 
: 
$str %
,% &
table 
: 
$str  
,  !
type 
: 
$str $
,$ %
	maxLength 
: 
$num 
, 
nullable 
: 
false 
,  
defaultValue 
: 
$str  
)  !
;! "
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name 
: 
$str %
,% &
table 
: 
$str  
,  !
type 
: 
$str #
,# $
	maxLength 
: 
$num 
, 
nullable 
: 
false 
,  
defaultValue 
: 
$str  
)  !
;! "
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{   	
migrationBuilder!! 
.!! 

DropColumn!! '
(!!' (
name"" 
:"" 
$str"" %
,""% &
table## 
:## 
$str##  
)##  !
;##! "
migrationBuilder%% 
.%% 

DropColumn%% '
(%%' (
name&& 
:&& 
$str&& %
,&&% &
table'' 
:'' 
$str''  
)''  !
;''! "
}(( 	
})) 
}** ò
vC:\Users\joela\source\repos\PruebaParcial2\Prueba2Hotel\Prueba2Hotel\Migrations\20250117221358_ActualizacionEstado2.cs
	namespace 	
Prueba2Hotel
 
. 

Migrations !
{ 
public 

partial 
class  
ActualizacionEstado2 -
:. /
	Migration0 9
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str 
, 
table 
: 
$str #
,# $
type 
: 
$str %
,% &
	maxLength 
: 
$num 
, 
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldType 
: 
$str (
,( )
oldMaxLength 
: 
$num !
)! "
;" #
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str 
, 
table 
: 
$str #
,# $
type 
: 
$str %
,% &
	maxLength 
: 
$num 
, 
nullable   
:   
false   
,    
defaultValue!! 
:!! 
$str!!  
,!!  !

oldClrType"" 
:"" 
typeof"" "
(""" #
string""# )
)"") *
,""* +
oldType## 
:## 
$str## (
,##( )
oldMaxLength$$ 
:$$ 
$num$$ !
,$$! "
oldNullable%% 
:%% 
true%% !
)%%! "
;%%" #
}&& 	
}'' 
}(( Û
uC:\Users\joela\source\repos\PruebaParcial2\Prueba2Hotel\Prueba2Hotel\Migrations\20250117220334_ActualizacionEstado.cs
	namespace 	
Prueba2Hotel
 
. 

Migrations !
{ 
public 

partial 
class 
ActualizacionEstado ,
:- .
	Migration/ 8
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str 
, 
table 
: 
$str #
,# $
type 
: 
$str %
,% &
	maxLength 
: 
$num 
, 
nullable 
: 
false 
,  

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldType 
: 
$str (
)( )
;) *
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str 
, 
table 
: 
$str #
,# $
type 
: 
$str %
,% &
nullable 
: 
false 
,  

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldType   
:   
$str   (
,  ( )
oldMaxLength!! 
:!! 
$num!! !
)!!! "
;!!" #
}"" 	
}## 
}$$ Ç_
lC:\Users\joela\source\repos\PruebaParcial2\Prueba2Hotel\Prueba2Hotel\Controllers\SerAdicionalesController.cs
	namespace 	
Prueba2Hotel
 
. 
Controllers "
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public		 

class		 $
SerAdicionalesController		 )
:		* +
ControllerBase		, :
{

 
private 
readonly 
AppDBContext %
_appDBContext& 3
;3 4
public $
SerAdicionalesController '
(' (
AppDBContext( 4
appDBContext5 A
)A B
{ 	
_appDBContext 
= 
appDBContext (
;( )
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetServicios) 5
(5 6
)6 7
{ 	
return 
Ok 
( 
await 
_appDBContext )
.) * 
ServiciosAdicionales* >
.> ?
ToListAsync? J
(J K
)K L
)L M
;M N
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
PostServicio) 5
(5 6
[6 7
FromBody7 ?
]? @ 
ServiciosAdicionalesA U
servicioV ^
)^ _
{ 	
if 
( 
! 

ModelState 
. 
IsValid #
)# $
{ 
return 
Ok 
( 

ModelState $
)$ %
;% &
} %
UtilsServiciosAdicionales!! %%
utilsServiciosAdicionales!!& ?
=!!@ A
new!!B E%
UtilsServiciosAdicionales!!F _
(!!_ `
_appDBContext!!` m
)!!m n
;!!n o
string## 
mensaje## 
=## %
utilsServiciosAdicionales## 6
.##6 7
ValidarServicio##7 F
(##F G
servicio##G O
)##O P
;##P Q
if%% 
(%% 
mensaje%% 
!=%% 
$str%% 
)%% 
{&& 
return'' 
Ok'' 
('' 
new'' 
{'' 
message''  '
=''( )
mensaje''* 1
}''2 3
)''3 4
;''4 5
}(( 
_appDBContext** 
.**  
ServiciosAdicionales** .
.**. /
Add**/ 2
(**2 3
servicio**3 ;
)**; <
;**< =
await++ 
_appDBContext++ 
.++  
SaveChangesAsync++  0
(++0 1
)++1 2
;++2 3
return,, 
Ok,, 
(,, 
servicio,, 
),, 
;,,  
}-- 	
[// 	
HttpPut//	 
(// 
$str// 
)// 
]// 
public00 
async00 
Task00 
<00 
IActionResult00 '
>00' (
PutServicio00) 4
(004 5
int005 8
id009 ;
,00; <
[00= >
FromBody00> F
]00F G 
ServiciosAdicionales00H \
servicio00] e
)00e f
{11 	
if22 
(22 
id22 
!=22 
servicio22 
.22 
Id22 !
)22! "
{33 
return44 
Ok44 
(44 
new44 
{44 
message44  '
=44( )
$str44* K
}44L M
)44M N
;44N O
}55 
if77 
(77 
!77 

ModelState77 
.77 
IsValid77 #
)77# $
{88 
return99 
Ok99 
(99 

ModelState99 $
)99$ %
;99% &
}:: %
UtilsServiciosAdicionales<< %%
utilsServiciosAdicionales<<& ?
=<<@ A
new<<B E%
UtilsServiciosAdicionales<<F _
(<<_ `
_appDBContext<<` m
)<<m n
;<<n o
string>> 
mensaje>> 
=>> %
utilsServiciosAdicionales>> 6
.>>6 7
ValidarServicio>>7 F
(>>F G
servicio>>G O
)>>O P
;>>P Q
if@@ 
(@@ 
mensaje@@ 
!=@@ 
$str@@ 
)@@ 
{AA 
returnBB 
OkBB 
(BB 
newBB 
{BB 
messageBB  '
=BB( )
mensajeBB* 1
}BB2 3
)BB3 4
;BB4 5
}CC 
tryEE 
{FF 
_appDBContextGG 
.GG 
EntryGG #
(GG# $
servicioGG$ ,
)GG, -
.GG- .
StateGG. 3
=GG4 5
EntityStateGG6 A
.GGA B
ModifiedGGB J
;GGJ K
awaitHH 
_appDBContextHH #
.HH# $
SaveChangesAsyncHH$ 4
(HH4 5
)HH5 6
;HH6 7
returnII 
	NoContentII  
(II  !
)II! "
;II" #
}JJ 
catchKK 
(KK (
DbUpdateConcurrencyExceptionKK /
)KK/ 0
{LL 
ifMM 
(MM 
!MM 
awaitMM 
_appDBContextMM (
.MM( ) 
ServiciosAdicionalesMM) =
.MM= >
AnyAsyncMM> F
(MMF G
sMMG H
=>MMI K
sMML M
.MMM N
IdMMN P
==MMQ S
idMMT V
)MMV W
)MMW X
{NN 
returnOO 
NotFoundOO #
(OO# $
newOO$ '
{OO( )
messageOO* 1
=OO2 3
$strOO4 W
}OOX Y
)OOY Z
;OOZ [
}PP 
elseQQ 
{RR 
returnSS 
NotFoundSS #
(SS# $
newSS$ '
{SS( )
messageSS* 1
=SS2 3
$strSS4 X
}SSY Z
)SSZ [
;SS[ \
}TT 
}UU 
catchVV 
(VV 
	ExceptionVV 
exVV 
)VV  
{WW 
returnXX 

StatusCodeXX !
(XX! "
StatusCodesXX" -
.XX- .(
Status500InternalServerErrorXX. J
,XXJ K
newXXL O
{XXP Q
messageXXR Y
=XXZ [
exXX\ ^
.XX^ _
MessageXX_ f
}XXg h
)XXh i
;XXi j
}YY 
}ZZ 	
[\\ 	

HttpDelete\\	 
(\\ 
$str\\ 
)\\ 
]\\ 
public]] 
async]] 
Task]] 
<]] 
IActionResult]] '
>]]' (
DeleteServicio]]) 7
(]]7 8
int]]8 ;
id]]< >
)]]> ?
{^^ 	
try__ 
{`` 
varaa 
servicioaa 
=aa 
awaitaa $
_appDBContextaa% 2
.aa2 3 
ServiciosAdicionalesaa3 G
.aaG H
	FindAsyncaaH Q
(aaQ R
idaaR T
)aaT U
;aaU V
ifbb 
(bb 
serviciobb 
==bb 
nullbb  $
)bb$ %
{cc 
returndd 
Okdd 
(dd 
newdd !
{dd" #
messagedd$ +
=dd, -
$strdd. Q
}ddR S
)ddS T
;ddT U
}ee 
_appDBContextgg 
.gg  
ServiciosAdicionalesgg 2
.gg2 3
Removegg3 9
(gg9 :
serviciogg: B
)ggB C
;ggC D
awaithh 
_appDBContexthh #
.hh# $
SaveChangesAsynchh$ 4
(hh4 5
)hh5 6
;hh6 7
returnii 
Okii 
(ii 
newii 
{ii 
messageii  '
=ii( )
$strii* L
,iiL M
servicioiiN V
}iiW X
)iiX Y
;iiY Z
}jj 
catchkk 
(kk 
	Exceptionkk 
)kk 
{ll 
returnmm 

StatusCodemm !
(mm! "
StatusCodesmm" -
.mm- .(
Status500InternalServerErrormm. J
,mmJ K
newmmL O
{mmP Q
messagemmR Y
=mmZ [
$strmm\ }
}mm~ 
)	mm Ä
;
mmÄ Å
}nn 
}oo 	
}pp 
publicrr 

classrr %
UtilsServiciosAdicionalesrr *
{ss 
privatett 
readonlytt 
AppDBContexttt %
_appDBContexttt& 3
;tt3 4
publicuu %
UtilsServiciosAdicionalesuu (
(uu( )
AppDBContextuu) 5
appDBContextuu6 B
)uuB C
{vv 	
_appDBContextww 
=ww 
appDBContextww (
;ww( )
}xx 	
public{{ 
string{{ 
ValidarServicio{{ %
({{% & 
ServiciosAdicionales{{& :
servicio{{; C
){{C D
{|| 	
if}} 
(}} 
servicio}} 
.}} 
Descripcion}} $
==}}% '
null}}( ,
)}}, -
{~~ 
return 
$str 5
;5 6
}
ÄÄ 
if
ÅÅ 
(
ÅÅ 
servicio
ÅÅ 
.
ÅÅ 
Costo
ÅÅ 
==
ÅÅ !
$num
ÅÅ" #
)
ÅÅ# $
{
ÇÇ 
return
ÉÉ 
$str
ÉÉ 0
;
ÉÉ0 1
}
ÑÑ 
if
ÖÖ 
(
ÖÖ 
servicio
ÖÖ 
.
ÖÖ 
Descripcion
ÖÖ $
.
ÖÖ$ %
Length
ÖÖ% +
>
ÖÖ, -
$num
ÖÖ. 1
)
ÖÖ1 2
{
ÜÜ 
return
áá 
$str
áá M
;
ááM N
}
àà 
if
ââ 
(
ââ 
servicio
ââ 
.
ââ 
Costo
ââ 
<
ââ  
$num
ââ! "
)
ââ" #
{
ää 
return
ãã 
$str
ãã 8
;
ãã8 9
}
åå 
else
çç 
if
çç 
(
çç 
servicio
çç 
.
çç 
Costo
çç #
>
çç$ %
$num
çç& *
)
çç* +
{
éé 
return
èè 
$str
èè <
;
èè< =
}
êê 
if
ìì 
(
ìì 
servicio
ìì 
.
ìì 
	ReservaId
ìì "
==
ìì# %
$num
ìì& '
)
ìì' (
{
îî 
return
ïï 
$str
ïï 1
;
ïï1 2
}
ññ 
var
ôô 
reserva
ôô 
=
ôô 
_appDBContext
ôô '
.
ôô' (
Reserva
ôô( /
.
ôô/ 0
FirstOrDefault
ôô0 >
(
ôô> ?
r
ôô? @
=>
ôôA C
r
ôôD E
.
ôôE F
Id
ôôF H
==
ôôI K
servicio
ôôL T
.
ôôT U
	ReservaId
ôôU ^
)
ôô^ _
;
ôô_ `
if
öö 
(
öö 
reserva
öö 
==
öö 
null
öö 
)
öö  
{
õõ 
return
úú 
$str
úú .
;
úú. /
}
ùù 
if
†† 
(
†† 
servicio
†† 
.
†† 
Descripcion
†† $
!=
††% '
$str
††( 0
&&
††1 3
servicio
††4 <
.
††< =
Descripcion
††= H
!=
††I K
$str
††L X
&&
††Y [
servicio
††\ d
.
††d e
Descripcion
††e p
!=
††q s
$str
††t z
&&
††{ }
servicio††~ Ü
.††Ü á
Descripcion††á í
!=††ì ï
$str††ñ ∞
)††∞ ±
{
°° 
return
¢¢ 
$str
¢¢ y
;
¢¢y z
}
££ 
return
•• 
$str
•• 
;
•• 
}
ßß 	
}
®® 
}©© £©
fC:\Users\joela\source\repos\PruebaParcial2\Prueba2Hotel\Prueba2Hotel\Controllers\ReservasController.cs
	namespace 	
Prueba2Hotel
 
. 
Controllers "
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public		 

class		 
ReservasController		 #
:		$ %
ControllerBase		& 4
{

 
private 
readonly 
AppDBContext %
_appDBContext& 3
;3 4
public 
ReservasController !
(! "
AppDBContext" .
appDBContext/ ;
); <
{ 	
_appDBContext 
= 
appDBContext (
;( )
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetReservas) 4
(4 5
)5 6
{ 	
return 
Ok 
( 
await 
_appDBContext )
.) *
Reserva* 1
.1 2
Select2 8
(8 9
r9 :
=>; =
new> A
{B C
rD E
.E F
IdF H
,H I
rJ K
.K L
EntradaL S
,S T
rU V
.V W
SalidaW ]
,] ^
r_ `
.` a
Precioa g
,g h
ri j
.j k
CedulaClientek x
,x y
rz {
.{ |
NumHabitacion	| â
}
ä ã
)
ã å
.
å ç
ToListAsync
ç ò
(
ò ô
)
ô ö
)
ö õ
;
õ ú
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
PostReserva) 4
(4 5
Reserva5 <
reserva= D
)D E
{ 	
if 
( 
reserva 
== 
null 
)  
{ 
return 
Ok 
( 
new 
{ 
message  '
=( )
$str* Z
}[ \
)\ ]
;] ^
}   
UtilsReservas"" 
utilsReservas"" '
=""( )
new""* -
UtilsReservas"". ;
(""; <
_appDBContext""< I
)""I J
;""J K
string$$ 
mensaje$$ 
=$$ 
utilsReservas$$ *
.$$* +
ValidarReserva$$+ 9
($$9 :
reserva$$: A
)$$A B
;$$B C
if%% 
(%% 
mensaje%% 
!=%% 
$str%% 
)%% 
{&& 
return'' 
Ok'' 
('' 
new'' 
{'' 
message''  '
=''( )
mensaje''* 1
}''2 3
)''3 4
;''4 5
}(( 
if** 
(** 
string** 
.** 
IsNullOrEmpty** $
(**$ %
reserva**% ,
.**, -
CedulaCliente**- :
)**: ;
)**; <
{++ 
return,, 
Ok,, 
(,, 
new,, 
{,, 
message,,  '
=,,( )
$str,,* O
},,P Q
),,Q R
;,,R S
}-- 
reserva// 
.// 
	ClienteId// 
=// 
utilsReservas//  -
.//- .
ObtenerIdCliente//. >
(//> ?
reserva//? F
.//F G
CedulaCliente//G T
,//T U
reserva//V ]
)//] ^
;//^ _
if11 
(11 
string11 
.11 
IsNullOrEmpty11 $
(11$ %
reserva11% ,
.11, -
NumHabitacion11- :
)11: ;
)11; <
{22 
return33 
Ok33 
(33 
new33 
{33 
message33  '
=33( )
$str33* Q
}33R S
)33S T
;33T U
}44 
reserva66 
.66 
HabitacionId66  
=66! "
utilsReservas66# 0
.660 1
ObtenerIdHabitacion661 D
(66D E
reserva66E L
.66L M
NumHabitacion66M Z
,66Z [
reserva66\ c
)66c d
;66d e
var99 

habitacion99 
=99 
await99 "
_appDBContext99# 0
.990 1

Habitacion991 ;
.99; <
FirstOrDefaultAsync99< O
(99O P
h99P Q
=>99R T
h99U V
.99V W
Id99W Y
==99Z \
reserva99] d
.99d e
HabitacionId99e q
)99q r
;99r s
if:: 
(:: 

habitacion:: 
==:: 
null:: "
)::" #
{;; 
return<< 
Ok<< 
(<< 
new<< 
{<< 
message<<  '
=<<( )
$str<<* D
}<<E F
)<<F G
;<<G H
}== 

habitacion>> 
.>> 
Estado>> 
=>> 
$str>>  +
;>>+ ,
_appDBContext?? 
.?? 
Entry?? 
(??  

habitacion??  *
)??* +
.??+ ,
State??, 1
=??2 3
EntityState??4 ?
.??? @
Modified??@ H
;??H I
await@@ 
_appDBContext@@ 
.@@  
SaveChangesAsync@@  0
(@@0 1
)@@1 2
;@@2 3
_appDBContextBB 
.BB 
ReservaBB !
.BB! "
AddBB" %
(BB% &
reservaBB& -
)BB- .
;BB. /
awaitCC 
_appDBContextCC 
.CC  
SaveChangesAsyncCC  0
(CC0 1
)CC1 2
;CC2 3
returnDD 
OkDD 
(DD 
reservaDD 
)DD 
;DD 
}EE 	
[GG 	
HttpPutGG	 
(GG 
$strGG 
)GG 
]GG 
publicHH 
asyncHH 
TaskHH 
<HH 
IActionResultHH '
>HH' (

PutReservaHH) 3
(HH3 4
intHH4 7
idHH8 :
,HH: ;
[HH< =
FromBodyHH= E
]HHE F
ReservaHHG N
reservaHHO V
)HHV W
{II 	
ifJJ 
(JJ 
idJJ 
!=JJ 
reservaJJ 
.JJ 
IdJJ  
)JJ  !
{KK 
returnLL 
OkLL 
(LL 
newLL 
{LL 
messageLL  '
=LL( )
$strLL* L
}LLM N
)LLN O
;LLO P
}MM 
UtilsReservasOO 
utilsReservasOO '
=OO( )
newOO* -
UtilsReservasOO. ;
(OO; <
_appDBContextOO< I
)OOI J
;OOJ K
stringQQ 
mensajeQQ 
=QQ 
utilsReservasQQ *
.QQ* +
ValidarReservaQQ+ 9
(QQ9 :
reservaQQ: A
)QQA B
;QQB C
ifRR 
(RR 
mensajeRR 
!=RR 
$strRR 
)RR 
{SS 
returnTT 
OkTT 
(TT 
newTT 
{TT 
messageTT  '
=TT( )
mensajeTT* 1
}TT2 3
)TT3 4
;TT4 5
}UU 
varYY 

habitacionYY 
=YY 
awaitYY "
_appDBContextYY# 0
.YY0 1

HabitacionYY1 ;
.YY; <
FirstOrDefaultAsyncYY< O
(YYO P
hYYP Q
=>YYR T
hYYU V
.YYV W
NumHabitacionYYW d
==YYe g
reservaYYh o
.YYo p
NumHabitacionYYp }
)YY} ~
;YY~ 
ifZZ 
(ZZ 

habitacionZZ 
==ZZ 
nullZZ "
)ZZ" #
{[[ 
return\\ 
Ok\\ 
(\\ 
new\\ 
{\\ 
message\\  '
=\\( )
$str\\* D
}\\E F
)\\F G
;\\G H
}]] 
var`` 
cliente`` 
=`` 
await`` 
_appDBContext``  -
.``- .
Cliente``. 5
.``5 6
FirstOrDefaultAsync``6 I
(``I J
c``J K
=>``L N
c``O P
.``P Q
Cedula``Q W
==``X Z
reserva``[ b
.``b c
CedulaCliente``c p
)``p q
;``q r
ifaa 
(aa 
clienteaa 
==aa 
nullaa 
)aa  
{bb 
returncc 
Okcc 
(cc 
newcc 
{cc 
messagecc  '
=cc( )
$strcc* A
}ccB C
)ccC D
;ccD E
}dd 
tryff 
{gg 
_appDBContexthh 
.hh 
Entryhh #
(hh# $
reservahh$ +
)hh+ ,
.hh, -
Statehh- 2
=hh3 4
EntityStatehh5 @
.hh@ A
ModifiedhhA I
;hhI J
awaitii 
_appDBContextii #
.ii# $
SaveChangesAsyncii$ 4
(ii4 5
)ii5 6
;ii6 7
returnjj 
	NoContentjj  
(jj  !
)jj! "
;jj" #
}kk 
catchll 
(ll (
DbUpdateConcurrencyExceptionll /
)ll/ 0
{mm 
ifnn 
(nn 
!nn 
awaitnn 
_appDBContextnn (
.nn( )
Reservann) 0
.nn0 1
AnyAsyncnn1 9
(nn9 :
rnn: ;
=>nn< >
rnn? @
.nn@ A
IdnnA C
==nnD F
idnnG I
)nnI J
)nnJ K
{oo 
returnpp 
Okpp 
(pp 
newpp !
{pp" #
messagepp$ +
=pp, -
$strpp. F
}ppG H
)ppH I
;ppI J
}qq 
elserr 
{ss 
returntt 
Oktt 
(tt 
newtt !
{tt" #
messagett$ +
=tt, -
$strtt. Q
}ttR S
)ttS T
;ttT U
}uu 
}vv 
catchww 
(ww 
	Exceptionww 
)ww 
{xx 
returnyy 

StatusCodeyy !
(yy! "
StatusCodesyy" -
.yy- .(
Status500InternalServerErroryy. J
,yyJ K
newyyL O
{yyP Q
messageyyR Y
=yyZ [
$stryy\ 
}
yyÄ Å
)
yyÅ Ç
;
yyÇ É
}zz 
}{{ 	
[}} 	

HttpDelete}}	 
(}} 
$str}} 
)}} 
]}} 
public~~ 
async~~ 
Task~~ 
<~~ 
IActionResult~~ '
>~~' (
DeleteReserva~~) 6
(~~6 7
int~~7 :
id~~; =
)~~= >
{ 	
try
ÄÄ 
{
ÅÅ 
var
ÇÇ 
reserva
ÇÇ 
=
ÇÇ 
await
ÇÇ #
_appDBContext
ÇÇ$ 1
.
ÇÇ1 2
Reserva
ÇÇ2 9
.
ÇÇ9 :
	FindAsync
ÇÇ: C
(
ÇÇC D
id
ÇÇD F
)
ÇÇF G
;
ÇÇG H
if
ÉÉ 
(
ÉÉ 
reserva
ÉÉ 
==
ÉÉ 
null
ÉÉ #
)
ÉÉ# $
{
ÑÑ 
return
ÖÖ 
NotFound
ÖÖ #
(
ÖÖ# $
new
ÖÖ$ '
{
ÖÖ( )
message
ÖÖ* 1
=
ÖÖ2 3
$str
ÖÖ4 L
}
ÖÖM N
)
ÖÖN O
;
ÖÖO P
}
ÜÜ 
var
ââ 

habitacion
ââ 
=
ââ  
await
ââ! &
_appDBContext
ââ' 4
.
ââ4 5

Habitacion
ââ5 ?
.
ââ? @!
FirstOrDefaultAsync
ââ@ S
(
ââS T
h
ââT U
=>
ââV X
h
ââY Z
.
ââZ [
Id
ââ[ ]
==
ââ^ `
reserva
ââa h
.
ââh i
HabitacionId
ââi u
)
ââu v
;
ââv w
if
ää 
(
ää 

habitacion
ää 
==
ää !
null
ää" &
)
ää& '
{
ãã 
return
åå 
Ok
åå 
(
åå 
new
åå !
{
åå" #
message
åå$ +
=
åå, -
$str
åå. H
}
ååI J
)
ååJ K
;
ååK L
}
çç 

habitacion
éé 
.
éé 
Estado
éé !
=
éé" #
$str
éé$ 0
;
éé0 1
_appDBContext
èè 
.
èè 
Entry
èè #
(
èè# $

habitacion
èè$ .
)
èè. /
.
èè/ 0
State
èè0 5
=
èè6 7
EntityState
èè8 C
.
èèC D
Modified
èèD L
;
èèL M
await
êê 
_appDBContext
êê #
.
êê# $
SaveChangesAsync
êê$ 4
(
êê4 5
)
êê5 6
;
êê6 7
var
ìì 
	servicios
ìì 
=
ìì 
await
ìì  %
_appDBContext
ìì& 3
.
ìì3 4"
ServiciosAdicionales
ìì4 H
.
ììH I
Where
ììI N
(
ììN O
s
ììO P
=>
ììQ S
s
ììT U
.
ììU V
	ReservaId
ììV _
==
ìì` b
id
ììc e
)
ììe f
.
ììf g
ToListAsync
ììg r
(
ììr s
)
ììs t
;
ììt u
foreach
îî 
(
îî 
var
îî 
s
îî 
in
îî !
	servicios
îî" +
)
îî+ ,
{
ïï 
_appDBContext
ññ !
.
ññ! ""
ServiciosAdicionales
ññ" 6
.
ññ6 7
Remove
ññ7 =
(
ññ= >
s
ññ> ?
)
ññ? @
;
ññ@ A
}
óó 
_appDBContext
ôô 
.
ôô 
Reserva
ôô %
.
ôô% &
Remove
ôô& ,
(
ôô, -
reserva
ôô- 4
)
ôô4 5
;
ôô5 6
await
öö 
_appDBContext
öö #
.
öö# $
SaveChangesAsync
öö$ 4
(
öö4 5
)
öö5 6
;
öö6 7
return
õõ 
Ok
õõ 
(
õõ 
new
õõ 
{
õõ 
message
õõ  '
=
õõ( )
$str
õõ* K
,
õõK L
reserva
õõM T
}
õõU V
)
õõV W
;
õõW X
}
ùù 
catch
ûû 
(
ûû 
	Exception
ûû 
)
ûû 
{
üü 
return
†† 

StatusCode
†† !
(
††! "
StatusCodes
††" -
.
††- .*
Status500InternalServerError
††. J
,
††J K
new
††L O
{
††P Q
message
††R Y
=
††Z [
$str
††\ |
}
††} ~
)
††~ 
;†† Ä
}
°° 
}
¢¢ 	
}
££ 
public
•• 

class
•• 
UtilsReservas
•• 
{
¶¶ 
private
ßß 
readonly
ßß 
AppDBContext
ßß %
_appDBContext
ßß& 3
;
ßß3 4
public
®® 
UtilsReservas
®® 
(
®® 
AppDBContext
®® )
appDBContext
®®* 6
)
®®6 7
{
©© 	
_appDBContext
™™ 
=
™™ 
appDBContext
™™ (
;
™™( )
}
´´ 	
public
ÆÆ 
string
ÆÆ 
ValidarReserva
ÆÆ $
(
ÆÆ$ %
Reserva
ÆÆ% ,
reserva
ÆÆ- 4
)
ÆÆ4 5
{
ØØ 	
string
∞∞ 
mensaje
∞∞ 
=
∞∞ !
ValidarIngresoDatos
∞∞ 0
(
∞∞0 1
reserva
∞∞1 8
)
∞∞8 9
;
∞∞9 :
if
±± 
(
±± 
mensaje
±± 
!=
±± 
$str
±± 
)
±± 
{
≤≤ 
return
≥≥ 
mensaje
≥≥ 
;
≥≥ 
}
¥¥ 
if
∑∑ 
(
∑∑ 
reserva
∑∑ 
.
∑∑ 
Entrada
∑∑ 
>=
∑∑  "
reserva
∑∑# *
.
∑∑* +
Salida
∑∑+ 1
)
∑∑1 2
{
∏∏ 
return
ππ 
$str
ππ Q
;
ππQ R
}
∫∫ 
var
ΩΩ 
reservas
ΩΩ 
=
ΩΩ 
_appDBContext
ΩΩ (
.
ΩΩ( )
Reserva
ΩΩ) 0
.
ΩΩ0 1
Where
ΩΩ1 6
(
ΩΩ6 7
r
ΩΩ7 8
=>
ΩΩ9 ;
r
ΩΩ< =
.
ΩΩ= >
HabitacionId
ΩΩ> J
==
ΩΩK M
reserva
ΩΩN U
.
ΩΩU V
HabitacionId
ΩΩV b
)
ΩΩb c
.
ΩΩc d
ToList
ΩΩd j
(
ΩΩj k
)
ΩΩk l
;
ΩΩl m
if
ææ 
(
ææ 
reservas
ææ 
.
ææ 
Count
ææ 
==
ææ !
$num
ææ" #
)
ææ# $
{
øø 
return
¿¿ 
$str
¿¿ 
;
¿¿ 
}
¡¡ 
foreach
¬¬ 
(
¬¬ 
var
¬¬ 
r
¬¬ 
in
¬¬ 
reservas
¬¬ &
)
¬¬& '
{
√√ 
if
ƒƒ 
(
ƒƒ 
reserva
ƒƒ 
.
ƒƒ 
Entrada
ƒƒ #
>=
ƒƒ$ &
r
ƒƒ' (
.
ƒƒ( )
Entrada
ƒƒ) 0
&&
ƒƒ1 3
reserva
ƒƒ4 ;
.
ƒƒ; <
Entrada
ƒƒ< C
<=
ƒƒD F
r
ƒƒG H
.
ƒƒH I
Salida
ƒƒI O
)
ƒƒO P
{
≈≈ 
return
∆∆ 
$str
∆∆ T
;
∆∆T U
}
«« 
if
»» 
(
»» 
reserva
»» 
.
»» 
Salida
»» "
>=
»»# %
r
»»& '
.
»»' (
Entrada
»»( /
&&
»»0 2
reserva
»»3 :
.
»»: ;
Salida
»»; A
<=
»»B D
r
»»E F
.
»»F G
Salida
»»G M
)
»»M N
{
…… 
return
   
$str
   S
;
  S T
}
ÀÀ 
}
ÃÃ 
if
œœ 
(
œœ 
reserva
œœ 
.
œœ 
Precio
œœ 
>
œœ  
$num
œœ! &
)
œœ& '
{
–– 
return
—— 
$str
—— >
;
——> ?
}
““ 
return
‘‘ 
$str
‘‘ 
;
‘‘ 
}
’’ 	
public
◊◊ 
static
◊◊ 
string
◊◊ !
ValidarIngresoDatos
◊◊ 0
(
◊◊0 1
Reserva
◊◊1 8
reserva
◊◊9 @
)
◊◊@ A
{
ÿÿ 	
if
ŸŸ 
(
ŸŸ 
reserva
ŸŸ 
.
ŸŸ 
Entrada
ŸŸ 
==
ŸŸ  "
null
ŸŸ# '
)
ŸŸ' (
{
⁄⁄ 
return
€€ 
$str
€€ :
;
€€: ;
}
‹‹ 
if
›› 
(
›› 
reserva
›› 
.
›› 
Salida
›› 
==
›› !
null
››" &
)
››& '
{
ﬁﬁ 
return
ﬂﬂ 
$str
ﬂﬂ 9
;
ﬂﬂ9 :
}
‡‡ 
if
·· 
(
·· 
reserva
·· 
.
·· 
Precio
·· 
==
·· !
$num
··" #
)
··# $
{
‚‚ 
return
„„ 
$str
„„ 0
;
„„0 1
}
‰‰ 
else
ÂÂ 
if
ÂÂ 
(
ÂÂ 
reserva
ÂÂ 
.
ÂÂ 
Precio
ÂÂ #
<
ÂÂ$ %
$num
ÂÂ& '
)
ÂÂ' (
{
ÊÊ 
return
ÁÁ 
$str
ÁÁ 9
;
ÁÁ9 :
}
ËË 
return
ÈÈ 
$str
ÈÈ 
;
ÈÈ 
}
ÍÍ 	
public
ÏÏ 
int
ÏÏ 
ObtenerIdCliente
ÏÏ #
(
ÏÏ# $
string
ÏÏ$ *
cedula
ÏÏ+ 1
,
ÏÏ1 2
Reserva
ÏÏ3 :
reserva
ÏÏ; B
)
ÏÏB C
{
ÌÌ 	
var
ÓÓ 
cliente
ÓÓ 
=
ÓÓ 
_appDBContext
ÓÓ '
.
ÓÓ' (
Cliente
ÓÓ( /
.
ÓÓ/ 0
FirstOrDefault
ÓÓ0 >
(
ÓÓ> ?
c
ÓÓ? @
=>
ÓÓA C
c
ÓÓD E
.
ÓÓE F
Cedula
ÓÓF L
==
ÓÓM O
reserva
ÓÓP W
.
ÓÓW X
CedulaCliente
ÓÓX e
)
ÓÓe f
;
ÓÓf g
if
ÔÔ 
(
ÔÔ 
cliente
ÔÔ 
==
ÔÔ 
null
ÔÔ 
)
ÔÔ  
{
 
return
ÒÒ 
$num
ÒÒ 
;
ÒÒ 
}
ÚÚ 
return
ÛÛ 
cliente
ÛÛ 
.
ÛÛ 
Id
ÛÛ 
;
ÛÛ 
}
ÙÙ 	
public
ˆˆ 
int
ˆˆ !
ObtenerIdHabitacion
ˆˆ &
(
ˆˆ& '
string
ˆˆ' -
numHabitacion
ˆˆ. ;
,
ˆˆ; <
Reserva
ˆˆ= D
reserva
ˆˆE L
)
ˆˆL M
{
˜˜ 	
var
¯¯ 

habitacion
¯¯ 
=
¯¯ 
_appDBContext
¯¯ *
.
¯¯* +

Habitacion
¯¯+ 5
.
¯¯5 6
FirstOrDefault
¯¯6 D
(
¯¯D E
h
¯¯E F
=>
¯¯G I
h
¯¯J K
.
¯¯K L
NumHabitacion
¯¯L Y
==
¯¯Z \
reserva
¯¯] d
.
¯¯d e
NumHabitacion
¯¯e r
)
¯¯r s
;
¯¯s t
if
˘˘ 
(
˘˘ 

habitacion
˘˘ 
==
˘˘ 
null
˘˘ "
)
˘˘" #
{
˙˙ 
return
˚˚ 
$num
˚˚ 
;
˚˚ 
}
¸¸ 
return
˝˝ 

habitacion
˝˝ 
.
˝˝ 
Id
˝˝  
;
˝˝  !
}
˛˛ 	
}
ÄÄ 
}ÅÅ áÖ
hC:\Users\joela\source\repos\PruebaParcial2\Prueba2Hotel\Prueba2Hotel\Controllers\HabitacionController.cs
	namespace 	
Prueba2Hotel
 
. 
Controllers "
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public		 

class		  
HabitacionController		 %
:		& '
ControllerBase		( 6
{

 
private 
readonly 
AppDBContext %
_appDBContext& 3
;3 4
public  
HabitacionController #
(# $
AppDBContext$ 0
appDBContext1 =
)= >
{ 	
_appDBContext 
= 
appDBContext (
;( )
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetHabitaciones) 8
(8 9
)9 :
{ 	
return 
Ok 
( 
await 
_appDBContext )
.) *

Habitacion* 4
.4 5
Select5 ;
(; <
r< =
=>> @
newA D
{E F
rG H
.H I
IdI K
,K L
rM N
.N O
NumHabitacionO \
,\ ]
r^ _
._ `
Tipo` d
,d e
rf g
.g h
NumMaximoPersonash y
,y z
r{ |
.| }
Descripcion	} à
,
à â
r
ä ã
.
ã å
Estado
å í
}
í ì
)
ì î
.
î ï
ToListAsync
ï †
(
† °
)
° ¢
)
¢ £
;
£ §
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
PostHabitacion) 7
(7 8

Habitacion8 B

habitacionC M
)M N
{ 	
if 
( 
! 

ModelState 
. 
IsValid #
)# $
{ 
return 
Ok 
( 

ModelState $
)$ %
;% &
} 
UtilsHabitacion!! 
utilsHabitacion!! +
=!!, -
new!!. 1
UtilsHabitacion!!2 A
(!!A B
_appDBContext!!B O
)!!O P
;!!P Q
string## 
mensaje## 
=## 
utilsHabitacion## ,
.##, -
ValidarHabitacion##- >
(##> ?

habitacion##? I
)##I J
;##J K
if%% 
(%% 
mensaje%% 
!=%% 
$str%% 
)%% 
{&& 
return'' 
Ok'' 
('' 
new'' 
{'' 
message''  '
=''( )
mensaje''* 1
}''2 3
)''3 4
;''4 5
}(( 

habitacion** 
.** 
Estado** 
=** 
$str**  ,
;**, -
_appDBContext,, 
.,, 

Habitacion,, $
.,,$ %
Add,,% (
(,,( )

habitacion,,) 3
),,3 4
;,,4 5
await-- 
_appDBContext-- 
.--  
SaveChangesAsync--  0
(--0 1
)--1 2
;--2 3
return.. 
Ok.. 
(.. 

habitacion..  
)..  !
;..! "
}// 	
[11 	
HttpPut11	 
(11 
$str11 "
)11" #
]11# $
public22 
async22 
Task22 
<22 
IActionResult22 '
>22' (
PutHabitacion22) 6
(226 7
string227 =
NumHabitacion22> K
,22K L

Habitacion22M W

habitacion22X b
)22b c
{33 	
if44 
(44 
NumHabitacion44 
!=44  

habitacion44! +
.44+ ,
NumHabitacion44, 9
)449 :
{55 
return66 
Ok66 
(66 
new66 
{66 
message66  '
=66( )
$str66* S
}66T U
)66U V
;66V W
}77 
UtilsHabitacion99 
utilsHabitacion99 +
=99, -
new99. 1
UtilsHabitacion992 A
(99A B
_appDBContext99B O
)99O P
;99P Q
string;; 
mensaje;; 
=;; 
utilsHabitacion;; ,
.;;, -
ValidarHabitacion;;- >
(;;> ?

habitacion;;? I
);;I J
;;;J K
if== 
(== 
mensaje== 
!=== 
$str== 
)== 
{>> 
return?? 
Ok?? 
(?? 
new?? 
{?? 
message??  '
=??( )
mensaje??* 1
}??2 3
)??3 4
;??4 5
}@@ 

habitacionCC 
.CC 
NumHabitacionCC $
=CC% &
NumHabitacionCC' 4
;CC4 5
tryEE 
{FF 
_appDBContextGG 
.GG 
EntryGG #
(GG# $

habitacionGG$ .
)GG. /
.GG/ 0
StateGG0 5
=GG6 7
EntityStateGG8 C
.GGC D
ModifiedGGD L
;GGL M
awaitHH 
_appDBContextHH #
.HH# $
SaveChangesAsyncHH$ 4
(HH4 5
)HH5 6
;HH6 7
returnII 
	NoContentII  
(II  !
)II! "
;II" #
}JJ 
catchKK 
(KK (
DbUpdateConcurrencyExceptionKK /
)KK/ 0
{LL 
ifMM 
(MM 
!MM 
awaitMM 
_appDBContextMM (
.MM( )

HabitacionMM) 3
.MM3 4
AnyAsyncMM4 <
(MM< =
hMM= >
=>MM? A
hMMB C
.MMC D
NumHabitacionMMD Q
==MMR T
NumHabitacionMMU b
)MMb c
)MMc d
{NN 
returnOO 
OkOO 
(OO 
newOO !
{OO" #
messageOO$ +
=OO, -
$strOO. I
}OOJ K
)OOK L
;OOL M
}PP 
elseQQ 
{RR 
returnSS 
OkSS 
(SS 
newSS !
{SS" #
messageSS$ +
=SS, -
$strSS. R
}SSS T
)SST U
;SSU V
}TT 
}UU 
catchVV 
(VV 
	ExceptionVV 
exVV 
)VV  
{WW 
returnXX 

StatusCodeXX !
(XX! "
StatusCodesXX" -
.XX- .(
Status500InternalServerErrorXX. J
,XXJ K
newXXL O
{XXP Q
messageXXR Y
=XXZ [
exXX\ ^
.XX^ _
MessageXX_ f
}XXg h
)XXh i
;XXi j
}YY 
}ZZ 	
[\\ 	

HttpDelete\\	 
(\\ 
$str\\ %
)\\% &
]\\& '
public]] 
async]] 
Task]] 
<]] 
IActionResult]] '
>]]' (
DeleteHabitacion]]) 9
(]]9 :
string]]: @
NumHabitacion]]A N
)]]N O
{^^ 	
try__ 
{`` 
varbb 

habitacionbb 
=bb  
awaitbb! &
_appDBContextbb' 4
.bb4 5

Habitacionbb5 ?
.bb? @
FirstOrDefaultAsyncbb@ S
(bbS T
hbbT U
=>bbV X
hbbY Z
.bbZ [
NumHabitacionbb[ h
==bbi k
NumHabitacionbbl y
)bby z
;bbz {
ifcc 
(cc 

habitacioncc 
==cc !
nullcc" &
)cc& '
{dd 
returnee 
Okee 
(ee 
newee !
{ee" #
messageee$ +
=ee, -
$stree. I
}eeJ K
)eeK L
;eeL M
}ff 
varhh 
idhh 
=hh 

habitacionhh #
.hh# $
Idhh$ &
;hh& '
varkk 
reservaskk 
=kk 
awaitkk $
_appDBContextkk% 2
.kk2 3
Reservakk3 :
.kk: ;
Wherekk; @
(kk@ A
rkkA B
=>kkC E
rkkF G
.kkG H
HabitacionIdkkH T
==kkU W
idkkX Z
)kkZ [
.kk[ \
ToListAsynckk\ g
(kkg h
)kkh i
;kki j
stringnn 
nuevaHabitacionnn &
=nn' (
$strnn) +
;nn+ ,
foreachoo 
(oo 
varoo 
reservaoo $
inoo% '
reservasoo( 0
)oo0 1
{pp 
varqq  
habitacionDisponibleqq ,
=qq- .
awaitqq/ 4
_appDBContextqq5 B
.qqB C

HabitacionqqC M
.qqM N
FirstOrDefaultAsyncqqN a
(qqa b
hqqb c
=>qqd f
hqqg h
.qqh i
Estadoqqi o
==qqp r
$strqqs 
)	qq Ä
;
qqÄ Å
ifrr 
(rr  
habitacionDisponiblerr ,
!=rr- /
nullrr0 4
)rr4 5
{ss 
reservatt 
.tt  
HabitacionIdtt  ,
=tt- . 
habitacionDisponiblett/ C
.ttC D
IdttD F
;ttF G
reservauu 
.uu  
NumHabitacionuu  -
=uu. / 
habitacionDisponibleuu0 D
.uuD E
NumHabitacionuuE R
;uuR S
_appDBContextvv %
.vv% &
Entryvv& +
(vv+ ,
reservavv, 3
)vv3 4
.vv4 5
Statevv5 :
=vv; <
EntityStatevv= H
.vvH I
ModifiedvvI Q
;vvQ R
nuevaHabitacionww '
=ww( ) 
habitacionDisponibleww* >
.ww> ?
NumHabitacionww? L
;wwL M
}xx 
elseyy 
{zz 
return{{ 

BadRequest{{ )
({{) *
new{{* -
{{{. /
message{{0 7
={{8 9
$str	{{: õ
}
{{ú ù
)
{{ù û
;
{{û ü
}|| 
}}} 
_appDBContext 
. 

Habitacion (
.( )
Remove) /
(/ 0

habitacion0 :
): ;
;; <
await
ÄÄ 
_appDBContext
ÄÄ #
.
ÄÄ# $
SaveChangesAsync
ÄÄ$ 4
(
ÄÄ4 5
)
ÄÄ5 6
;
ÄÄ6 7
return
ÅÅ 
Ok
ÅÅ 
(
ÅÅ 
new
ÅÅ 
{
ÅÅ 
message
ÅÅ  '
=
ÅÅ( )
$str
ÅÅ* n
+
ÅÅo p
nuevaHabitacionÅÅq Ä
,ÅÅÄ Å

habitacionÅÅÇ å
}ÅÅç é
)ÅÅé è
;ÅÅè ê
}
ÇÇ 
catch
ÉÉ 
(
ÉÉ 
	Exception
ÉÉ 
ex
ÉÉ 
)
ÉÉ  
{
ÑÑ 
return
ÖÖ 

StatusCode
ÖÖ !
(
ÖÖ! "
StatusCodes
ÖÖ" -
.
ÖÖ- .*
Status500InternalServerError
ÖÖ. J
,
ÖÖJ K
new
ÖÖL O
{
ÖÖP Q
message
ÖÖR Y
=
ÖÖZ [
ex
ÖÖ\ ^
.
ÖÖ^ _
Message
ÖÖ_ f
}
ÖÖg h
)
ÖÖh i
;
ÖÖi j
}
ÜÜ 
}
áá 	
}
àà 
public
ää 

class
ää 
UtilsHabitacion
ää  
{
ãã 
private
åå 
readonly
åå 
AppDBContext
åå %
_appDBContext
åå& 3
;
åå3 4
public
çç 
UtilsHabitacion
çç 
(
çç 
AppDBContext
çç +
appDBContext
çç, 8
)
çç8 9
{
éé 	
_appDBContext
èè 
=
èè 
appDBContext
èè (
;
èè( )
}
êê 	
public
ëë 
string
ëë 
ValidarHabitacion
ëë '
(
ëë' (

Habitacion
ëë( 2

habitacion
ëë3 =
)
ëë= >
{
íí 	
string
ìì 
mensaje
ìì 
=
ìì 
$str
ìì 
;
ìì  
if
ïï 
(
ïï 

habitacion
ïï 
.
ïï 
NumHabitacion
ïï (
==
ïï) +
null
ïï, 0
)
ïï0 1
{
ññ 
return
óó 
$str
óó >
;
óó> ?
}
òò 
if
öö 
(
öö 
!
öö 
int
öö 
.
öö 
TryParse
öö 
(
öö 

habitacion
öö (
.
öö( )
NumMaximoPersonas
öö) :
.
öö: ;
ToString
öö; C
(
ööC D
)
ööD E
,
ööE F
out
ööG J
int
ööK N
numMaximoPersonas
ööO `
)
öö` a
)
ööa b
{
õõ 
Console
úú 
.
úú 
	WriteLine
úú !
(
úú! "
numMaximoPersonas
úú" 3
)
úú3 4
;
úú4 5
return
ùù 
$str
ùù ~
;
ùù~ 
}
ûû 
else
üü 
if
üü 
(
üü 

habitacion
üü 
.
üü  
NumMaximoPersonas
üü  1
==
üü2 4
$num
üü5 6
)
üü6 7
{
†† 
return
°° 
$str
°° C
;
°°C D
}
¢¢ 
if
££ 
(
££ 

habitacion
££ 
.
££ 
Descripcion
££ &
==
££' )
null
££* .
)
££. /
{
§§ 
return
•• 
$str
•• 5
;
••5 6
}
¶¶ 
if
ßß 
(
ßß 

habitacion
ßß 
.
ßß 
Tipo
ßß 
==
ßß  "
null
ßß# '
)
ßß' (
{
®® 
return
©© 
$str
©© <
;
©©< =
}
™™ 
var
≠≠ !
habitacionExistente
≠≠ #
=
≠≠$ %
_appDBContext
≠≠& 3
.
≠≠3 4

Habitacion
≠≠4 >
.
≠≠> ?
FirstOrDefault
≠≠? M
(
≠≠M N
h
≠≠N O
=>
≠≠P R
h
≠≠S T
.
≠≠T U
NumHabitacion
≠≠U b
==
≠≠c e

habitacion
≠≠f p
.
≠≠p q
NumHabitacion
≠≠q ~
)
≠≠~ 
;≠≠ Ä
if
ÆÆ 
(
ÆÆ !
habitacionExistente
ÆÆ #
!=
ÆÆ$ &
null
ÆÆ' +
)
ÆÆ+ ,
{
ØØ 
return
∞∞ 
$str
∞∞ ;
;
∞∞; <
}
±± 
if
¥¥ 
(
¥¥ 

habitacion
¥¥ 
.
¥¥ 
NumMaximoPersonas
¥¥ ,
>
¥¥- .
$num
¥¥/ 0
)
¥¥0 1
{
µµ 
return
∂∂ 
$str
∂∂ M
;
∂∂M N
}
∑∑ 
if
∫∫ 
(
∫∫ 
!
∫∫ 
long
∫∫ 
.
∫∫ 
TryParse
∫∫ 
(
∫∫ 

habitacion
∫∫ )
.
∫∫) *
NumHabitacion
∫∫* 7
,
∫∫7 8
out
∫∫9 <
long
∫∫= A
result
∫∫B H
)
∫∫H I
)
∫∫I J
{
ªª 
Console
ºº 
.
ºº 
	WriteLine
ºº !
(
ºº! "
result
ºº" (
)
ºº( )
;
ºº) *
return
ΩΩ 
(
ΩΩ 
$str
ΩΩ N
)
ΩΩN O
;
ΩΩO P
}
ææ 
else
øø 
if
øø 
(
øø 

habitacion
øø 
.
øø  
NumHabitacion
øø  -
.
øø- .
Length
øø. 4
>
øø5 6
$num
øø7 8
)
øø8 9
{
¿¿ 
return
¡¡ 
$str
¡¡ P
;
¡¡P Q
}
¬¬ 
else
ƒƒ 
if
ƒƒ 
(
ƒƒ 

habitacion
ƒƒ 
.
ƒƒ  
Descripcion
ƒƒ  +
.
ƒƒ+ ,
Length
ƒƒ, 2
>
ƒƒ3 4
$num
ƒƒ5 8
)
ƒƒ8 9
{
≈≈ 
return
∆∆ 
$str
∆∆ M
;
∆∆M N
}
«« 
else
»» 
if
»» 
(
»» 

habitacion
»» 
.
»»  
Tipo
»»  $
.
»»$ %
Length
»»% +
>
»», -
$num
»». 1
)
»»1 2
{
…… 
return
   
$str
   T
;
  T U
}
ÀÀ 
if
ŒŒ 
(
ŒŒ 

habitacion
ŒŒ 
.
ŒŒ 
Tipo
ŒŒ 
!=
ŒŒ  "
$str
ŒŒ# ,
&&
ŒŒ- /

habitacion
ŒŒ0 :
.
ŒŒ: ;
Tipo
ŒŒ; ?
!=
ŒŒ@ B
$str
ŒŒC M
&&
ŒŒN P

habitacion
ŒŒQ [
.
ŒŒ[ \
Tipo
ŒŒ\ `
!=
ŒŒa c
$str
ŒŒd o
)
ŒŒo p
{
œœ 
return
–– 
$str
–– V
;
––V W
}
—— 
return
”” 
mensaje
”” 
;
”” 
}
‘‘ 	
}
’’ 
}÷÷ óë
eC:\Users\joela\source\repos\PruebaParcial2\Prueba2Hotel\Prueba2Hotel\Controllers\ClienteController.cs
	namespace 	
Prueba2Hotel
 
. 
Controllers "
{ 
[ 
Route 

(
 
$str 
) 
] 
[		 
ApiController		 
]		 
public

 

class

 
ClienteController

 "
:

# $
ControllerBase

% 3
{ 
private 
readonly 
AppDBContext %
_appDBContext& 3
;3 4
public 
ClienteController  
(  !
AppDBContext! -
appDBContext. :
): ;
{ 	
_appDBContext 
= 
appDBContext (
;( )
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetClientes) 4
(4 5
)5 6
{ 	
return 
Ok 
( 
await 
_appDBContext )
.) *
Cliente* 1
.1 2
ToListAsync2 =
(= >
)> ?
)? @
;@ A
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
PostCliente) 4
(4 5
Cliente5 <
cliente= D
)D E
{ 	
UtilsCliente 
utilsCliente %
=& '
new( +
UtilsCliente, 8
(8 9
_appDBContext9 F
)F G
;G H
string 
mensaje 
= 
utilsCliente )
.) *"
validacionDatosCliente* @
(@ A
clienteA H
)H I
;I J
if!! 
(!! 
mensaje!! 
!=!! 
$str!! 
)!! 
{"" 
return## 
Ok## 
(## 
new## 
{## 
message##  '
=##( )
mensaje##* 1
}##2 3
)##3 4
;##4 5
}$$ 
_appDBContext&& 
.&& 
Cliente&& !
.&&! "
Add&&" %
(&&% &
cliente&&& -
)&&- .
;&&. /
await'' 
_appDBContext'' 
.''  
SaveChangesAsync''  0
(''0 1
)''1 2
;''2 3
return(( 
Ok(( 
((( 
cliente(( 
)(( 
;(( 
})) 	
[++ 	
HttpPut++	 
(++ 
$str++ 
)++ 
]++ 
public,, 
async,, 
Task,, 
<,, 
IActionResult,, '
>,,' (

PutCliente,,) 3
(,,3 4
string,,4 :
cedula,,; A
,,,A B
[,,C D
FromBody,,D L
],,L M
Cliente,,N U
cliente,,V ]
),,] ^
{-- 	
UtilsCliente.. 
utilsCliente.. %
=..& '
new..( +
UtilsCliente.., 8
(..8 9
_appDBContext..9 F
)..F G
;..G H
if00 
(00 
cedula00 
!=00 
cliente00 !
.00! "
Cedula00" (
)00( )
{11 
return22 
Ok22 
(22 
new22 
{22 
message22  '
=22( )
$str22* N
}22O P
)22P Q
;22Q R
}33 
string55 
mensaje55 
=55 
utilsCliente55 )
.55) *"
validacionDatosCliente55* @
(55@ A
cliente55A H
)55H I
;55I J
if77 
(77 
mensaje77 
!=77 
$str77 
)77 
{88 
return99 
Ok99 
(99 
new99 
{99 
message99  '
=99( )
mensaje99* 1
}992 3
)993 4
;994 5
}:: 
try<< 
{== 
await>> 
_appDBContext>> #
.>># $
SaveChangesAsync>>$ 4
(>>4 5
)>>5 6
;>>6 7
return?? 
Ok?? 
(?? 
cliente?? !
)??! "
;??" #
}@@ 
catchAA 
(AA (
DbUpdateConcurrencyExceptionAA /
)AA/ 0
{BB 
ifCC 
(CC 
!CC 
ClienteExistsCC "
(CC" #
cedulaCC# )
)CC) *
)CC* +
{DD 
returnEE 
OkEE 
(EE 
newEE !
{EE" #
messageEE$ +
=EE, -
$strEE. F
}EEG H
)EEH I
;EEI J
}FF 
elseGG 
{HH 
returnII 
OkII 
(II 
newII !
{II" #
messageII$ +
=II, -
$strII. O
}IIP Q
)IIQ R
;IIR S
}JJ 
}KK 
}LL 	
privateNN 
boolNN 
ClienteExistsNN "
(NN" #
stringNN# )
cedulaNN* 0
)NN0 1
{OO 	
returnPP 
_appDBContextPP  
.PP  !
ClientePP! (
.PP( )
AnyPP) ,
(PP, -
cPP- .
=>PP/ 1
cPP2 3
.PP3 4
CedulaPP4 :
==PP; =
cedulaPP> D
)PPD E
;PPE F
}QQ 	
[SS 	

HttpDeleteSS	 
(SS 
$strSS 
)SS 
]SS  
publicTT 
asyncTT 
TaskTT 
<TT 
IActionResultTT '
>TT' (
DeleteClienteTT) 6
(TT6 7
stringTT7 =
cedulaTT> D
)TTD E
{UU 	
varVV 
clienteVV 
=VV 
awaitVV 
_appDBContextVV  -
.VV- .
ClienteVV. 5
.VV5 6
FirstOrDefaultAsyncVV6 I
(VVI J
cVVJ K
=>VVL N
cVVO P
.VVP Q
CedulaVVQ W
==VVX Z
cedulaVV[ a
)VVa b
;VVb c
ifWW 
(WW 
clienteWW 
==WW 
nullWW 
)WW  
{XX 
returnYY 
OkYY 
(YY 
newYY 
{YY 
messageYY  '
=YY( )
$strYY* B
}YYC D
)YYD E
;YYE F
}ZZ 
_appDBContext\\ 
.\\ 
Cliente\\ !
.\\! "
Remove\\" (
(\\( )
cliente\\) 0
)\\0 1
;\\1 2
await]] 
_appDBContext]] 
.]]  
SaveChangesAsync]]  0
(]]0 1
)]]1 2
;]]2 3
return^^ 
Ok^^ 
(^^ 
cliente^^ 
)^^ 
;^^ 
}__ 	
}`` 
publicbb 

partialbb 
classbb 
UtilsClientebb %
{cc 
privateee 
readonlyee 
AppDBContextee %
_appDBContextee& 3
;ee3 4
publicgg 
UtilsClientegg 
(gg 
AppDBContextgg (
appDBContextgg) 5
)gg5 6
{hh 	
_appDBContextii 
=ii 
appDBContextii (
;ii( )
}jj 	
[ll 	
GeneratedRegexll	 
(ll 
$strll (
)ll( )
]ll) *
privatemm 
staticmm 
partialmm 
Regexmm $ 
LetrasYEspaciosRegexmm% 9
(mm9 :
)mm: ;
;mm; <
publicoo 
staticoo 
booloo 
validarCedulaoo (
(oo( )
stringoo) /
cedulaoo0 6
)oo6 7
{pp 	
ifqq 
(qq 
cedulaqq 
.qq 
Lengthqq 
!=qq  
$numqq! #
)qq# $
{rr 
returnss 
truess 
;ss 
}tt 
intuu 
[uu 
]uu 
coeficientesuu 
=uu  
{uu! "
$numuu# $
,uu$ %
$numuu& '
,uu' (
$numuu) *
,uu* +
$numuu, -
,uu- .
$numuu/ 0
,uu0 1
$numuu2 3
,uu3 4
$numuu5 6
,uu6 7
$numuu8 9
,uu9 :
$numuu; <
}uu= >
;uu> ?
intvv 
verificadorvv 
=vv 
intvv !
.vv! "
Parsevv" '
(vv' (
cedulavv( .
.vv. /
	Substringvv/ 8
(vv8 9
$numvv9 :
,vv: ;
$numvv< =
)vv= >
)vv> ?
;vv? @
intww 
sumaww 
=ww 
$numww 
;ww 
forxx 
(xx 
intxx 
ixx 
=xx 
$numxx 
;xx 
ixx 
<xx 
$numxx  !
;xx! "
ixx# $
++xx$ &
)xx& '
{yy 
intzz 
valorzz 
=zz 
intzz 
.zz  
Parsezz  %
(zz% &
cedulazz& ,
.zz, -
	Substringzz- 6
(zz6 7
izz7 8
,zz8 9
$numzz: ;
)zz; <
)zz< =
*zz> ?
coeficienteszz@ L
[zzL M
izzM N
]zzN O
;zzO P
suma{{ 
+={{ 
({{ 
valor{{ 
>={{ !
$num{{" $
){{$ %
?{{& '
valor{{( -
-{{. /
$num{{0 1
:{{2 3
valor{{4 9
;{{9 :
}|| 
int}} 
residuo}} 
=}} 
suma}} 
%}}  
$num}}! #
;}}# $
int~~ 
	resultado~~ 
=~~ 
(~~ 
residuo~~ $
==~~% '
$num~~( )
)~~) *
?~~+ ,
$num~~- .
:~~/ 0
$num~~1 3
-~~4 5
residuo~~6 =
;~~= >
return 
( 
	resultado 
!=  
verificador! ,
), -
;- .
}
ÄÄ 	
public
ÇÇ 
string
ÇÇ $
validacionDatosCliente
ÇÇ ,
(
ÇÇ, -
Cliente
ÇÇ- 4
cliente
ÇÇ5 <
)
ÇÇ= >
{
ÉÉ 	
string
ÖÖ 
mensaje
ÖÖ 
=
ÖÖ 
$str
ÖÖ 
;
ÖÖ  
mensaje
áá 
=
áá !
ValidarIngresoDatos
áá )
(
áá) *
cliente
áá* 1
)
áá1 2
;
áá2 3
if
ââ 
(
ââ 
mensaje
ââ 
!=
ââ 
$str
ââ 
)
ââ 
{
ää 
return
ãã 
mensaje
ãã 
;
ãã 
}
åå 
if
éé 
(
éé 
cliente
éé 
.
éé 
Cedula
éé 
.
éé 
Length
éé %
!=
éé& (
$num
éé) +
)
éé+ ,
{
èè 
return
êê 
(
êê 
$str
êê :
)
êê: ;
;
êê; <
}
ëë 
else
íí 
if
íí 
(
íí 
validarCedula
íí "
(
íí" #
cliente
íí# *
.
íí* +
Cedula
íí+ 1
)
íí1 2
)
íí2 3
{
ìì 
return
îî 
(
îî 
$str
îî 1
)
îî1 2
;
îî2 3
}
ïï 
else
ññ 
if
ññ 
(
ññ 
_appDBContext
ññ "
.
ññ" #
Cliente
ññ# *
.
ññ* +
Any
ññ+ .
(
ññ. /
c
ññ/ 0
=>
ññ1 3
c
ññ4 5
.
ññ5 6
Cedula
ññ6 <
==
ññ= ?
cliente
ññ@ G
.
ññG H
Cedula
ññH N
)
ññN O
)
ññO P
{
óó 
return
òò 
(
òò 
$str
òò >
)
òò? @
;
òò@ A
}
ôô 
else
öö 
if
öö 
(
öö 
!
öö 
long
öö 
.
öö 
TryParse
öö #
(
öö# $
cliente
öö$ +
.
öö+ ,
Cedula
öö, 2
,
öö2 3
out
öö4 7
long
öö8 <
result
öö= C
)
ööC D
)
ööD E
{
õõ 
Console
úú 
.
úú 
	WriteLine
úú !
(
úú! "
result
úú" (
)
úú( )
;
úú) *
return
ùù 
(
ùù 
$str
ùù B
)
ùùB C
;
ùùC D
}
ûû 
if
°° 
(
°° 
!
°° "
LetrasYEspaciosRegex
°° %
(
°°% &
)
°°& '
.
°°' (
IsMatch
°°( /
(
°°/ 0
cliente
°°0 7
.
°°7 8
Nombre
°°8 >
)
°°> ?
)
°°? @
{
¢¢ 
return
££ 
$str
££ >
;
££> ?
}
§§ 
if
¶¶ 
(
¶¶ 
!
¶¶ "
LetrasYEspaciosRegex
¶¶ %
(
¶¶% &
)
¶¶& '
.
¶¶' (
IsMatch
¶¶( /
(
¶¶/ 0
cliente
¶¶0 7
.
¶¶7 8
Apellido
¶¶8 @
)
¶¶@ A
)
¶¶A B
{
ßß 
return
®® 
$str
®® @
;
®®@ A
}
©© 
if
¨¨ 
(
¨¨ 
!
¨¨ 
cliente
¨¨ 
.
¨¨ 
Correo
¨¨ 
.
¨¨  
Contains
¨¨  (
(
¨¨( )
$char
¨¨) ,
)
¨¨, -
)
¨¨- .
{
≠≠ 
return
ÆÆ 
$str
ÆÆ 0
;
ÆÆ0 1
}
ØØ 
if
≥≥ 
(
≥≥ 
cliente
≥≥ 
.
≥≥ 
Telefono
≥≥  
.
≥≥  !
Length
≥≥! '
!=
≥≥( *
$num
≥≥+ -
)
≥≥- .
{
¥¥ 
return
µµ 
(
µµ 
$str
µµ <
)
µµ< =
;
µµ= >
}
∂∂ 
else
∑∑ 
if
∑∑ 
(
∑∑ 
!
∑∑ 
long
∑∑ 
.
∑∑ 
TryParse
∑∑ #
(
∑∑# $
cliente
∑∑$ +
.
∑∑+ ,
Telefono
∑∑, 4
,
∑∑4 5
out
∑∑6 9
long
∑∑: >
result
∑∑? E
)
∑∑E F
)
∑∑F G
{
∏∏ 
Console
ππ 
.
ππ 
	WriteLine
ππ !
(
ππ! "
result
ππ" (
)
ππ( )
;
ππ) *
return
∫∫ 
(
∫∫ 
$str
∫∫ B
)
∫∫B C
;
∫∫C D
}
ªª 
else
ºº 
if
ºº 
(
ºº 
_appDBContext
ºº "
.
ºº" #
Cliente
ºº# *
.
ºº* +
Any
ºº+ .
(
ºº. /
c
ºº/ 0
=>
ºº1 3
c
ºº4 5
.
ºº5 6
Telefono
ºº6 >
==
ºº? A
cliente
ººB I
.
ººI J
Telefono
ººJ R
)
ººR S
)
ººS T
{
ΩΩ 
return
ææ 
(
ææ 
$str
ææ @
)
ææ@ A
;
ææA B
}
øø 
return
¡¡ 
mensaje
¡¡ 
;
¡¡ 
}
¬¬ 	
public
ƒƒ 
static
ƒƒ 
string
ƒƒ !
ValidarIngresoDatos
ƒƒ 0
(
ƒƒ0 1
Cliente
ƒƒ1 8
cliente
ƒƒ9 @
)
ƒƒ@ A
{
≈≈ 	
if
∆∆ 
(
∆∆ 
cliente
∆∆ 
.
∆∆ 
Cedula
∆∆ 
==
∆∆ !
null
∆∆" &
)
∆∆& '
{
«« 
return
»» 
(
»» 
$str
»» 1
)
»»1 2
;
»»2 3
}
…… 
if
   
(
   
cliente
   
.
   
Nombre
   
==
   !
null
  " &
)
  & '
{
ÀÀ 
return
ÃÃ 
(
ÃÃ 
$str
ÃÃ 1
)
ÃÃ1 2
;
ÃÃ2 3
}
ÕÕ 
if
ŒŒ 
(
ŒŒ 
cliente
ŒŒ 
.
ŒŒ 
Apellido
ŒŒ  
==
ŒŒ! #
null
ŒŒ$ (
)
ŒŒ( )
{
œœ 
return
–– 
(
–– 
$str
–– 3
)
––3 4
;
––4 5
}
—— 
if
““ 
(
““ 
cliente
““ 
.
““ 
Correo
““ 
==
““ !
$str
““" $
)
““$ %
{
”” 
return
‘‘ 
(
‘‘ 
$str
‘‘ 1
)
‘‘1 2
;
‘‘2 3
}
’’ 
if
÷÷ 
(
÷÷ 
cliente
÷÷ 
.
÷÷ 
Telefono
÷÷  
==
÷÷! #
null
÷÷$ (
)
÷÷( )
{
◊◊ 
return
ÿÿ 
(
ÿÿ 
$str
ÿÿ 3
)
ÿÿ3 4
;
ÿÿ4 5
}
ŸŸ 
if
⁄⁄ 
(
⁄⁄ 
cliente
⁄⁄ 
.
⁄⁄ 
	Direccion
⁄⁄ !
==
⁄⁄" $
null
⁄⁄% )
)
⁄⁄) *
{
€€ 
return
‹‹ 
(
‹‹ 
$str
‹‹ 4
)
‹‹4 5
;
‹‹5 6
}
›› 
if
ﬂﬂ 
(
ﬂﬂ 
cliente
ﬂﬂ 
.
ﬂﬂ 
Nombre
ﬂﬂ 
.
ﬂﬂ 
Length
ﬂﬂ %
>
ﬂﬂ& '
$num
ﬂﬂ( +
)
ﬂﬂ+ ,
{
‡‡ 
return
·· 
(
·· 
$str
·· I
)
··J K
;
··K L
}
‚‚ 
else
„„ 
if
„„ 
(
„„ 
cliente
„„ 
.
„„ 
Apellido
„„ %
.
„„% &
Length
„„& ,
>
„„- .
$num
„„/ 2
)
„„2 3
{
‰‰ 
return
ÂÂ 
(
ÂÂ 
$str
ÂÂ K
)
ÂÂL M
;
ÂÂM N
}
ÊÊ 
else
ÁÁ 
if
ÁÁ 
(
ÁÁ 
cliente
ÁÁ 
.
ÁÁ 
Correo
ÁÁ #
.
ÁÁ# $
Length
ÁÁ$ *
>
ÁÁ+ ,
$num
ÁÁ- 0
)
ÁÁ0 1
{
ËË 
return
ÈÈ 
(
ÈÈ 
$str
ÈÈ I
)
ÈÈJ K
;
ÈÈK L
}
ÍÍ 
else
ÎÎ 
if
ÎÎ 
(
ÎÎ 
cliente
ÎÎ 
.
ÎÎ 
	Direccion
ÎÎ &
.
ÎÎ& '
Length
ÎÎ' -
>
ÎÎ. /
$num
ÎÎ0 3
)
ÎÎ3 4
{
ÏÏ 
return
ÌÌ 
(
ÌÌ 
$str
ÌÌ L
)
ÌÌM N
;
ÌÌN O
}
ÓÓ 
return
 
$str
 
;
 
}
ÒÒ 	
}
ÚÚ 
}ıı Åä
TC:\Users\joela\source\repos\PruebaParcial2\Prueba2Hotel\Prueba2Hotel\AppDBContext.cs
	namespace 	
Prueba2Hotel
 
{ 
public 

class 
AppDBContext 
: 
	DbContext  )
{ 
public		 
AppDBContext		 
(		 
DbContextOptions		 ,
<		, -
AppDBContext		- 9
>		9 :
options		; B
)		B C
:		D E
base		F J
(		J K
options		K R
)		R S
{		T U
}		V W
public 
DbSet 
< 
Reserva 
> 
Reserva %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
DbSet 
< 
Cliente 
> 
Cliente %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
DbSet 
< 

Habitacion 
>  

Habitacion! +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
DbSet 
<  
ServiciosAdicionales )
>) * 
ServiciosAdicionales+ ?
{@ A
getB E
;E F
setG J
;J K
}L M
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
base 
. 
OnModelCreating  
(  !
modelBuilder! -
)- .
;. /
modelBuilder 
. 
Entity 
<  
Cliente  '
>' (
(( )
entity) /
=>0 2
{ 
entity 
. 
HasKey 
( 
c 
=>  "
c# $
.$ %
Id% '
)' (
;( )
entity 
. 
Property 
(  
c  !
=>" $
c% &
.& '
Cedula' -
)- .
.. /

IsRequired/ 9
(9 :
): ;
.; <
HasMaxLength< H
(H I
$numI K
)K L
;L M
entity 
. 
Property 
(  
c  !
=>" $
c% &
.& '
Nombre' -
)- .
.. /

IsRequired/ 9
(9 :
): ;
.; <
HasMaxLength< H
(H I
$numI L
)L M
;M N
entity 
. 
Property 
(  
c  !
=>" $
c% &
.& '
Apellido' /
)/ 0
.0 1

IsRequired1 ;
(; <
)< =
.= >
HasMaxLength> J
(J K
$numK N
)N O
;O P
entity 
. 
Property 
(  
c  !
=>" $
c% &
.& '
Correo' -
)- .
.. /

IsRequired/ 9
(9 :
): ;
.; <
HasMaxLength< H
(H I
$numI L
)L M
;M N
entity 
. 
Property 
(  
c  !
=>" $
c% &
.& '
Telefono' /
)/ 0
.0 1

IsRequired1 ;
(; <
)< =
.= >
HasMaxLength> J
(J K
$numK M
)M N
;N O
entity 
. 
Property 
(  
c  !
=>" $
c% &
.& '
	Direccion' 0
)0 1
.1 2

IsRequired2 <
(< =
)= >
.> ?
HasMaxLength? K
(K L
$numL O
)O P
;P Q
} 
) 
; 
modelBuilder 
. 
Entity 
<  

Habitacion  *
>* +
(+ ,
entity, 2
=>3 5
{   
entity!! 
.!! 
HasKey!! 
(!! 
h!! 
=>!!  "
h!!# $
.!!$ %
Id!!% '
)!!' (
;!!( )
entity"" 
."" 
Property"" 
(""  
h""  !
=>""" $
h""% &
.""& '
NumHabitacion""' 4
)""4 5
.""5 6

IsRequired""6 @
(""@ A
)""A B
.""B C
HasMaxLength""C O
(""O P
$num""P Q
)""Q R
.""R S
	IsUnicode""S \
(""\ ]
)""] ^
;""^ _
entity## 
.## 
Property## 
(##  
h##  !
=>##" $
h##% &
.##& '
NumMaximoPersonas##' 8
)##8 9
.##9 :

IsRequired##: D
(##D E
)##E F
;##F G
entity$$ 
.$$ 
Property$$ 
($$  
h$$  !
=>$$" $
h$$% &
.$$& '
Descripcion$$' 2
)$$2 3
.$$3 4

IsRequired$$4 >
($$> ?
)$$? @
.$$@ A
HasMaxLength$$A M
($$M N
$num$$N Q
)$$Q R
;$$R S
entity%% 
.%% 
Property%% 
(%%  
h%%  !
=>%%" $
h%%% &
.%%& '
Tipo%%' +
)%%+ ,
.%%, -

IsRequired%%- 7
(%%7 8
)%%8 9
.%%9 :
HasMaxLength%%: F
(%%F G
$num%%G J
)%%J K
;%%K L
entity&& 
.&& 
Property&& 
(&&  
h&&  !
=>&&" $
h&&% &
.&&& '
Estado&&' -
)&&- .
.&&. /
HasMaxLength&&/ ;
(&&; <
$num&&< ?
)&&? @
;&&@ A
}'' 
)'' 
;'' 
modelBuilder)) 
.)) 
Entity)) 
<))  
Reserva))  '
>))' (
())( )
entity))) /
=>))0 2
{** 
entity++ 
.++ 
HasKey++ 
(++ 
r++ 
=>++  "
r++# $
.++$ %
Id++% '
)++' (
;++( )
entity,, 
.,, 
Property,, 
(,,  
r,,  !
=>,," $
r,,% &
.,,& '
Entrada,,' .
),,. /
.,,/ 0

IsRequired,,0 :
(,,: ;
),,; <
;,,< =
entity-- 
.-- 
Property-- 
(--  
r--  !
=>--" $
r--% &
.--& '
Salida--' -
)--- .
.--. /

IsRequired--/ 9
(--9 :
)--: ;
;--; <
entity.. 
... 
Property.. 
(..  
r..  !
=>.." $
r..% &
...& '
Precio..' -
)..- .
.... /

IsRequired../ 9
(..9 :
)..: ;
...; <
HasColumnType..< I
(..I J
$str..J Z
)..Z [
;..[ \
entity// 
.// 
Property// 
(//  
r//  !
=>//" $
r//% &
.//& '
CedulaCliente//' 4
)//4 5
.//5 6

IsRequired//6 @
(//@ A
)//A B
.//B C
HasMaxLength//C O
(//O P
$num//P R
)//R S
;//S T
entity00 
.00 
Property00 
(00  
r00  !
=>00" $
r00% &
.00& '
NumHabitacion00' 4
)004 5
.005 6

IsRequired006 @
(00@ A
)00A B
.00B C
HasMaxLength00C O
(00O P
$num00P Q
)00Q R
;00R S
entity22 
.22 
HasOne22 
(22 
r22 
=>22  "
r22# $
.22$ %
Cliente22% ,
)22, -
.33 
WithMany33 
(33  
c33  !
=>33" $
c33% &
.33& '
Reservas33' /
)33/ 0
.44 
HasForeignKey44 $
(44$ %
r44% &
=>44' )
r44* +
.44+ ,
	ClienteId44, 5
)445 6
;446 7
entity66 
.66 
HasOne66 
(66 
r66 
=>66  "
r66# $
.66$ %

Habitacion66% /
)66/ 0
.77 
WithMany77 
(77  
h77  !
=>77" $
h77% &
.77& '
Reservas77' /
)77/ 0
.88 
HasForeignKey88 $
(88$ %
r88% &
=>88' )
r88* +
.88+ ,
HabitacionId88, 8
)888 9
;889 :
}99 
)99 
;99 
modelBuilder;; 
.;; 
Entity;; 
<;;   
ServiciosAdicionales;;  4
>;;4 5
(;;5 6
entity;;6 <
=>;;= ?
{<< 
entity== 
.== 
HasKey== 
(== 
s== 
=>==  "
s==# $
.==$ %
Id==% '
)==' (
;==( )
entity>> 
.>> 
Property>> 
(>>  
s>>  !
=>>>" $
s>>% &
.>>& '
Descripcion>>' 2
)>>2 3
.>>3 4

IsRequired>>4 >
(>>> ?
)>>? @
.>>@ A
HasMaxLength>>A M
(>>M N
$num>>N Q
)>>Q R
;>>R S
entity?? 
.?? 
Property?? 
(??  
s??  !
=>??" $
s??% &
.??& '
Costo??' ,
)??, -
.??- .

IsRequired??. 8
(??8 9
)??9 :
.??: ;
HasColumnType??; H
(??H I
$str??I Y
)??Y Z
;??Z [
entityAA 
.AA 
HasOneAA 
(AA 
sAA 
=>AA  "
sAA# $
.AA$ %
ReservaAA% ,
)AA, -
.BB 
WithManyBB 
(BB  
rBB  !
=>BB" $
rBB% &
.BB& ' 
ServiciosAdicionalesBB' ;
)BB; <
.CC 
HasForeignKeyCC $
(CC$ %
sCC% &
=>CC' )
sCC* +
.CC+ ,
	ReservaIdCC, 5
)CC5 6
;CC6 7
}DD 
)DD 
;DD 
}EE 	
}FF 
publicHH 

classHH 
ClienteHH 
{II 
[JJ 	

JsonIgnoreJJ	 
]JJ 
publicKK 
intKK 
IdKK 
{KK 
getKK 
;KK 
setKK  
;KK  !
}KK" #
publicLL 
requiredLL 
stringLL 
CedulaLL %
{LL& '
getLL( +
;LL+ ,
setLL- 0
;LL0 1
}LL2 3
publicMM 
requiredMM 
stringMM 
NombreMM %
{MM& '
getMM( +
;MM+ ,
setMM- 0
;MM0 1
}MM2 3
publicNN 
requiredNN 
stringNN 
ApellidoNN '
{NN( )
getNN* -
;NN- .
setNN/ 2
;NN2 3
}NN4 5
publicOO 
requiredOO 
stringOO 
CorreoOO %
{OO& '
getOO( +
;OO+ ,
setOO- 0
;OO0 1
}OO2 3
publicPP 
requiredPP 
stringPP 
TelefonoPP '
{PP( )
getPP* -
;PP- .
setPP/ 2
;PP2 3
}PP4 5
publicQQ 
requiredQQ 
stringQQ 
	DireccionQQ (
{QQ) *
getQQ, /
;QQ/ 0
setQQ1 4
;QQ4 5
}QQ6 7
[RR 	

JsonIgnoreRR	 
]RR 
publicSS 
ListSS 
<SS 
ReservaSS 
>SS 
?SS 
ReservasSS &
{SS' (
getSS) ,
;SS, -
setSS. 1
;SS1 2
}SS3 4
}TT 
publicVV 

classVV 

HabitacionVV 
{WW 
[XX 	

JsonIgnoreXX	 
]XX 
publicYY 
intYY 
IdYY 
{YY 
getYY 
;YY 
setYY  
;YY  !
}YY" #
publicZZ 
requiredZZ 
stringZZ 
TipoZZ #
{ZZ$ %
getZZ& )
;ZZ) *
setZZ+ .
;ZZ. /
}ZZ0 1
public[[ 
required[[ 
string[[ 
NumHabitacion[[ ,
{[[- .
get[[/ 2
;[[2 3
set[[4 7
;[[7 8
}[[9 :
public\\ 
required\\ 
int\\ 
NumMaximoPersonas\\ -
{\\. /
get\\0 3
;\\3 4
set\\5 8
;\\8 9
}\\: ;
public]] 
required]] 
string]] 
Descripcion]] *
{]]+ ,
get]]- 0
;]]0 1
set]]2 5
;]]5 6
}]]7 8
[__ 	

JsonIgnore__	 
]__ 
public`` 
string`` 
?`` 
Estado`` 
{`` 
get``  #
;``# $
set``% (
;``( )
}``* +
[bb 	

JsonIgnorebb	 
]bb 
publiccc 
Listcc 
<cc 
Reservacc 
>cc 
?cc 
Reservascc &
{cc' (
getcc) ,
;cc, -
setcc. 1
;cc1 2
}cc3 4
}dd 
publicff 

classff 
Reservaff 
{gg 
[hh 	

JsonIgnorehh	 
]hh 
publicii 
intii 
?ii 
Idii 
{ii 
getii 
;ii 
setii !
;ii! "
}ii# $
[jj 	

JsonIgnorejj	 
]jj 
publickk 
intkk 
?kk 
	ClienteIdkk 
{kk 
getkk  #
;kk# $
setkk% (
;kk( )
}kk* +
[ll 	

JsonIgnorell	 
]ll 
publicmm 
intmm 
?mm 
HabitacionIdmm  
{mm! "
getmm# &
;mm& '
setmm( +
;mm+ ,
}mm- .
publicnn 
requirednn 
DateTimenn  
?nn  !
Entradann" )
{nn* +
getnn, /
;nn/ 0
setnn1 4
;nn4 5
}nn6 7
publicoo 
requiredoo 
DateTimeoo  
?oo  !
Salidaoo" (
{oo) *
getoo+ .
;oo. /
setoo0 3
;oo3 4
}oo5 6
publicpp 
requiredpp 
decimalpp 
?pp  
Preciopp! '
{pp( )
getpp* -
;pp- .
setpp/ 2
;pp2 3
}pp4 5
publicss 
requiredss 
stringss 
?ss 
CedulaClientess  -
{ss. /
getss0 3
;ss3 4
setss5 8
;ss8 9
}ss: ;
publictt 
requiredtt 
stringtt 
?tt 
NumHabitaciontt  -
{tt. /
gettt0 3
;tt3 4
settt5 8
;tt8 9
}tt: ;
[vv 	

JsonIgnorevv	 
]vv 
publicww 
Clienteww 
?ww 
Clienteww 
{ww  !
getww" %
;ww% &
setww' *
;ww* +
}ww, -
[xx 	

JsonIgnorexx	 
]xx 
publicyy 

Habitacionyy 
?yy 

Habitacionyy %
{yy& '
getyy( +
;yy+ ,
setyy- 0
;yy0 1
}yy2 3
[zz 	

JsonIgnorezz	 
]zz 
public{{ 
List{{ 
<{{  
ServiciosAdicionales{{ (
>{{( )
?{{) * 
ServiciosAdicionales{{+ ?
{{{@ A
get{{B E
;{{E F
set{{G J
;{{J K
}{{L M
}|| 
public~~ 

class~~  
ServiciosAdicionales~~ %
{ 
[
ÄÄ 	

JsonIgnore
ÄÄ	 
]
ÄÄ 
public
ÅÅ 
int
ÅÅ 
?
ÅÅ 
Id
ÅÅ 
{
ÅÅ 
get
ÅÅ 
;
ÅÅ 
set
ÅÅ !
;
ÅÅ! "
}
ÅÅ# $
public
ÇÇ 
required
ÇÇ 
int
ÇÇ 
?
ÇÇ 
	ReservaId
ÇÇ &
{
ÇÇ' (
get
ÇÇ) ,
;
ÇÇ, -
set
ÇÇ. 1
;
ÇÇ1 2
}
ÇÇ3 4
public
ÉÉ 
required
ÉÉ 
string
ÉÉ 
?
ÉÉ 
Descripcion
ÉÉ  +
{
ÉÉ, -
get
ÉÉ. 1
;
ÉÉ1 2
set
ÉÉ3 6
;
ÉÉ6 7
}
ÉÉ8 9
public
ÑÑ 
required
ÑÑ 
decimal
ÑÑ 
?
ÑÑ  
Costo
ÑÑ! &
{
ÑÑ' (
get
ÑÑ) ,
;
ÑÑ, -
set
ÑÑ. 1
;
ÑÑ1 2
}
ÑÑ3 4
[
ÖÖ 	

JsonIgnore
ÖÖ	 
]
ÖÖ 
public
ÜÜ 
Reserva
ÜÜ 
?
ÜÜ 
Reserva
ÜÜ 
{
ÜÜ  !
get
ÜÜ" %
;
ÜÜ% &
set
ÜÜ' *
;
ÜÜ* +
}
ÜÜ, -
}
áá 
}àà 